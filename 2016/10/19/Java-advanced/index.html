<!DOCTYPE html>












  


<html class="theme-next muse use-motion" lang="zh-CN">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
























<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2">

<link rel="stylesheet" href="/css/main.css?v=7.1.1">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.1.1">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=7.1.1">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=7.1.1">


  <link rel="mask-icon" href="/images/logo.svg?v=7.1.1" color="#222">







<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Muse',
    version: '7.1.1',
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false,"dimmer":false},
    back2top: true,
    back2top_sidebar: false,
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="这次我更加深入的理解了泛型，多线程和IO处理，还有就是Java的类加载，反射和注解的知识">
<meta name="keywords" content="java">
<meta property="og:type" content="article">
<meta property="og:title" content="Java 进阶知识">
<meta property="og:url" content="https://barry215.github.io/2016/10/19/Java-advanced/index.html">
<meta property="og:site_name" content="麦金">
<meta property="og:description" content="这次我更加深入的理解了泛型，多线程和IO处理，还有就是Java的类加载，反射和注解的知识">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="https://barry215.github.io/2016/10/19/Java-advanced/Java-advanced/exception.jpg">
<meta property="og:image" content="https://barry215.github.io/2016/10/19/Java-advanced/Java-advanced/exception2.jpg">
<meta property="og:image" content="https://barry215.github.io/2016/10/19/Java-advanced/Java-advanced/IO.jpeg">
<meta property="og:image" content="https://barry215.github.io/2016/10/19/Java-advanced/Java-advanced/jmm.png">
<meta property="og:image" content="https://barry215.github.io/2016/10/19/Java-advanced/Java-advanced/jvm.png">
<meta property="og:image" content="https://barry215.github.io/2016/10/19/Java-advanced/Java-advanced/cms.jpg">
<meta property="og:updated_time" content="2017-11-17T00:48:51.000Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Java 进阶知识">
<meta name="twitter:description" content="这次我更加深入的理解了泛型，多线程和IO处理，还有就是Java的类加载，反射和注解的知识">
<meta name="twitter:image" content="https://barry215.github.io/2016/10/19/Java-advanced/Java-advanced/exception.jpg">



  <link rel="alternate" href="/atom.xml" title="麦金" type="application/atom+xml">



  
  
  <link rel="canonical" href="https://barry215.github.io/2016/10/19/Java-advanced/">



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>Java 进阶知识 | 麦金</title>
  












  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">麦金</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
      
        <p class="site-subtitle">麦金的博客</p>
      
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">

    
    
    
      
    

    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>首页</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-about">

    
    
    
      
    

    

    <a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i> <br>关于</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">

    
    
    
      
    

    

    <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br>标签</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">

    
    
    
      
    

    

    <a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>分类</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
    
      
    

    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>归档</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-schedule">

    
    
    
      
    

    

    <a href="/schedule/" rel="section"><i class="menu-item-icon fa fa-fw fa-calendar"></i> <br>日程表</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-sitemap">

    
    
    
      
    

    

    <a href="/sitemap.xml" rel="section"><i class="menu-item-icon fa fa-fw fa-sitemap"></i> <br>站点地图</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-commonweal">

    
    
    
      
    

    

    <a href="/404/" rel="section"><i class="menu-item-icon fa fa-fw fa-heartbeat"></i> <br>公益 404</a>

  </li>

      
      
    </ul>
  

  
    

  

  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://barry215.github.io/2016/10/19/Java-advanced/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="frank">
      <meta itemprop="description" content="总有一天你是我的">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="麦金">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">Java 进阶知识

              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2016-10-19 20:06:13" itemprop="dateCreated datePublished" datetime="2016-10-19T20:06:13+08:00">2016-10-19</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2017-11-17 08:48:51" itemprop="dateModified" datetime="2017-11-17T08:48:51+08:00">2017-11-17</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Java/" itemprop="url" rel="index"><span itemprop="name">Java</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          

          
            <div class="post-description">这次我更加深入的理解了泛型，多线程和IO处理，还有就是Java的类加载，反射和注解的知识</div>
          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h3 id="异常"><a href="#异常" class="headerlink" title="异常"></a>异常</h3><p><img src="Java-advanced/exception.jpg" alt="exception"></p>
<ul>
<li><p>Error</p>
<ul>
<li>是程序无法处理的错误，表示运行应用程序中较严重问题。</li>
<li>内存溢出可能是因为代码有死循环；静态变量过多；递归</li>
</ul>
</li>
<li><p>Exception</p>
<ul>
<li>是程序本身可以处理的异常。</li>
<li>Exception又包含了运行时异常(RuntimeException, 又叫非检查异常)和非运行时异常(又叫检查异常)</li>
<li>运行时异常都是RuntimeException类及其子类，这些异常是不检查的异常, 是在程序运行的时候可能会发生的, 所以程序可以捕捉, 也可以不捕捉。</li>
<li>检查异常是运行时异常以外的异常, 也是Exception及其子类, 这些异常从程序的角度来说是必须经过捕捉检查处理的, 否则不能通过编译。</li>
</ul>
<p><img src="Java-advanced/exception2.jpg" alt></p>
</li>
<li><p>java中的异常处理机制</p>
<ul>
<li><p>捕获异常</p>
</li>
<li><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> &#123;  </span><br><span class="line">    <span class="comment">// 可能会发生异常的程序代码  </span></span><br><span class="line">&#125; <span class="keyword">catch</span> (Type1 id1)&#123;  </span><br><span class="line">    <span class="comment">// 捕获并处置try抛出的异常类型Type1  </span></span><br><span class="line">&#125;<span class="keyword">catch</span> (Type2 id2)&#123;  </span><br><span class="line">    <span class="comment">//捕获并处置try抛出的异常类型Type2  </span></span><br><span class="line">&#125;<span class="keyword">finally</span> &#123;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>抛出异常</p>
</li>
<li><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">throw</span> <span class="keyword">new</span> MyException(<span class="string">"这是一个异常"</span>);<span class="comment">//异常信息</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p><strong>示例</strong></p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>&#123;</span><br><span class="line">  <span class="comment">//业务逻辑代码</span></span><br><span class="line">&#125;<span class="keyword">catch</span>(RuntimeException e)&#123; <span class="comment">//先catch子类错误</span></span><br><span class="line">  System.out.println(e.getMessage()); <span class="comment">//输出异常信息</span></span><br><span class="line">  e.printStackTrace(); <span class="comment">//把该异常的跟踪栈信息输出到控制台</span></span><br><span class="line">&#125;<span class="keyword">catch</span>(Exception e)&#123; <span class="comment">//再catch父类错误</span></span><br><span class="line">  System.out.println(e.getMessage()); <span class="comment">//输出异常信息</span></span><br><span class="line">&#125;<span class="keyword">finally</span>&#123;</span><br><span class="line">  <span class="comment">//一般做回收资源的操作</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test</span><span class="params">()</span> <span class="keyword">throws</span> IOException</span>&#123;</span><br><span class="line">	<span class="comment">//出现IO错误就抛出，让上一级调用这个test方法的程序处理</span></span><br><span class="line">  	<span class="comment">//如果已经是最顶层的程序，比如main方法，那异常就会交给JVM处理，他会打印错误，并且中止程序</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>自定义的异常</strong></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">MyException</span> <span class="keyword">extends</span> <span class="title">Exception</span></span>&#123;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">MyException</span><span class="params">()</span></span>&#123;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">MyException</span><span class="params">(String message)</span></span>&#123;</span><br><span class="line">            <span class="keyword">super</span>(message);</span><br><span class="line">        &#125;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">display</span><span class="params">(<span class="keyword">int</span> i)</span> <span class="keyword">throws</span> MyException</span>&#123;</span><br><span class="line">            <span class="keyword">if</span>(i == <span class="number">0</span>)&#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> MyException(<span class="string">"该值不能为0"</span>);</span><br><span class="line">            &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">                System.out.println( i / <span class="number">2</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">            Test test = <span class="keyword">new</span> Test();</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                test.display(<span class="number">0</span>);</span><br><span class="line">            &#125; <span class="keyword">catch</span> (MyException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><p><strong>注意点</strong></p>
<ul>
<li>不要在finally块中处理返回值</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span>&#123;</span><br><span class="line">  <span class="comment">//因为finally中包含了return语句</span></span><br><span class="line">  <span class="comment">//所以return true失去作用</span></span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">&#125;<span class="keyword">finally</span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>不要在构造函数中抛出异常。</li>
<li>尽可能的减小try块</li>
</ul>
</li>
</ul>
<h4 id="try-with-resources"><a href="#try-with-resources" class="headerlink" title="try -with-resources"></a>try -with-resources</h4><p><code>try(){}</code>这个括号在JDK1.7之前是没有的，是1.7的新特性。</p>
<p>括号里的内容支持包括流以及任何可关闭的资源，数据流会在 try 执行完毕后自动被关闭，而不用我们手动关闭了</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> (FileReader reader = <span class="keyword">new</span> FileReader(<span class="string">"data.txt"</span>)) &#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;<span class="keyword">catch</span> (IOException io) &#123;</span><br><span class="line">    ...</span><br><span class="line">&#125;<span class="keyword">finally</span>&#123;</span><br><span class="line">    ....</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="泛型"><a href="#泛型" class="headerlink" title="泛型"></a>泛型</h3><p><strong>自定义泛型方法</strong></p>
<p>先写public void test1(T t)，由于java中要先声明后使用，所以要在方法前面加上<t> ，即是public <t> void test1(T t)</t></t></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Geric</span> </span>&#123;</span><br><span class="line">	<span class="keyword">public</span> &lt;T&gt; <span class="function">T <span class="title">test1</span><span class="params">(T t)</span></span>&#123;</span><br><span class="line">		<span class="keyword">return</span> t;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">public</span> &lt;T,K&gt; <span class="function"><span class="keyword">void</span> <span class="title">test2</span><span class="params">(T t,K k)</span></span>&#123;	</span><br><span class="line">	&#125;	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>自定义泛型类</strong></p>
<p>在类定义了泛型后就不用在方法中再定义了，但静态方法还是要先定义</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Geric</span>&lt;<span class="title">T</span>&gt; </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> T <span class="title">test1</span><span class="params">(T t)</span></span>&#123;</span><br><span class="line">		<span class="keyword">return</span> t;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">public</span> &lt;K&gt; <span class="function"><span class="keyword">void</span> <span class="title">test2</span><span class="params">(T t,K k)</span></span>&#123;</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">static</span> &lt;T,K,E&gt; <span class="function"><span class="keyword">void</span> <span class="title">test3</span><span class="params">(T t,K k,E e)</span></span>&#123;</span><br><span class="line"></span><br><span class="line">	&#125;	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>泛型类</strong></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//原来的样子</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Container</span></span>&#123;</span><br><span class="line">      <span class="keyword">private</span> String key;</span><br><span class="line">      <span class="keyword">private</span> String value;</span><br><span class="line">      <span class="function"><span class="keyword">public</span> <span class="title">Container</span><span class="params">(String k,String v)</span></span>&#123;</span><br><span class="line">                key=k;</span><br><span class="line">                value=v;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="function"><span class="keyword">public</span> String <span class="title">getKey</span><span class="params">()</span></span>&#123;</span><br><span class="line">             <span class="keyword">return</span> key;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="function"><span class="keyword">public</span> Stirng <span class="title">setKey</span><span class="params">()</span></span>&#123;</span><br><span class="line">             <span class="keyword">this</span>.key=key;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="function"><span class="keyword">public</span> String <span class="title">getValue</span><span class="params">()</span></span>&#123;</span><br><span class="line">                <span class="keyword">return</span> value;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="function"><span class="keyword">public</span> String <span class="title">setValue</span><span class="params">()</span></span>&#123;</span><br><span class="line">                <span class="keyword">this</span>.value=value;</span><br><span class="line">      &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//使用泛型来代替自己的变量类型</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Container</span>&lt;<span class="title">k</span>,<span class="title">V</span>&gt;</span>&#123;</span><br><span class="line">        <span class="keyword">private</span> k key;</span><br><span class="line">        <span class="keyword">private</span> V value;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="title">Container</span><span class="params">(K k,V v)</span></span>&#123;</span><br><span class="line">                key=k;</span><br><span class="line">                value=v;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> K <span class="title">getkey</span><span class="params">()</span></span>&#123;</span><br><span class="line">                <span class="keyword">return</span> key;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> V <span class="title">getValue</span><span class="params">()</span></span>&#123;</span><br><span class="line">                  <span class="keyword">return</span> value</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setKey</span><span class="params">()</span></span>&#123;</span><br><span class="line">                <span class="keyword">this</span>.key=key;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setValue</span><span class="params">()</span></span>&#123;</span><br><span class="line">              <span class="keyword">this</span>.value=value;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//使用例子</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span></span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">		Container&lt;String,String&gt; c1=<span class="keyword">new</span> Container&lt;String ,String&gt;(<span class="string">"name"</span>,<span class="string">"hansheng"</span>);</span><br><span class="line">        Container&lt;String,Integer&gt; c2=<span class="keyword">new</span> Container&lt;String,Integer&gt;(<span class="string">"age"</span>,<span class="number">22</span>);</span><br><span class="line">        Container&lt;Double,Double&gt; c3=<span class="keyword">new</span> Container&lt;Double,Double&gt;(<span class="number">1.1</span>,<span class="number">1.3</span>);</span><br><span class="line">        System.out.println(c1.getKey() + <span class="string">" : "</span> + c1.getValue());      </span><br><span class="line">        System.out.println(c2.getKey() + <span class="string">" : "</span> + c2.getValue());</span><br><span class="line">        System.out.println(c3.getKey() + <span class="string">" : "</span> + c3.getValue());</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">输出：</span><br><span class="line">name : findingsea</span><br><span class="line">age : <span class="number">24</span></span><br><span class="line"><span class="number">1.1</span> : <span class="number">2.2</span></span><br></pre></td></tr></table></figure>
<ul>
<li><strong>泛型接口</strong></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">interface</span> <span class="title">Generator</span>&lt;<span class="title">T</span>&gt;</span>&#123;</span><br><span class="line">          <span class="function"><span class="keyword">public</span> T <span class="title">next</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//然后定义这个生成器类来实现这个接口</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FruitGenerator</span> <span class="keyword">implements</span> <span class="title">Generator</span>&lt;<span class="title">String</span>&gt;</span>&#123;</span><br><span class="line">          <span class="keyword">private</span> String[] fruits=<span class="keyword">new</span> String[]&#123;<span class="string">"Apple"</span>,<span class="string">"Banana"</span>,<span class="string">"Pear"</span>&#125;;</span><br><span class="line">          <span class="meta">@Override</span></span><br><span class="line">          <span class="function"><span class="keyword">public</span> String <span class="title">next</span><span class="params">()</span></span>&#123;</span><br><span class="line">                    Ramdom rand=<span class="keyword">new</span> Random();</span><br><span class="line">                    <span class="keyword">return</span> fruits[rand.nextInt(<span class="number">3</span>)];</span><br><span class="line">          &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>泛型方法</strong></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span></span>&#123;</span><br><span class="line">      <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; <span class="function"><span class="keyword">void</span> <span class="title">out</span><span class="params">(T t)</span></span>&#123;</span><br><span class="line">                System.out.println(t);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">              out(<span class="string">"hansheng"</span>);</span><br><span class="line">              out(<span class="number">123</span>);</span><br><span class="line">      &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Main</span> </span>&#123;</span><br><span class="line">	<span class="comment">//不限个数的数组形式参数</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> &lt;T&gt; <span class="function"><span class="keyword">void</span> <span class="title">out</span><span class="params">(T... args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">for</span> (T t : args) &#123;</span><br><span class="line">            System.out.println(t);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        out(<span class="string">"finding"</span>, <span class="number">123</span>, <span class="number">11.11</span>, <span class="keyword">true</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>泛型接口使用方法</strong></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">interface</span> <span class="title">Info</span>&lt;<span class="title">T</span>&gt;</span>&#123;</span><br><span class="line">        <span class="function"><span class="keyword">public</span> T <span class="title">getVar</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">InfoImpl</span>&lt;<span class="title">T</span>&gt; <span class="keyword">implements</span> <span class="title">Info</span>&lt;<span class="title">T</span>&gt;</span>&#123;</span><br><span class="line">      <span class="keyword">private</span> T <span class="keyword">var</span>;</span><br><span class="line">      <span class="function"><span class="keyword">public</span> <span class="title">InfoImpl</span><span class="params">(T <span class="keyword">var</span>)</span></span>&#123;</span><br><span class="line">                <span class="keyword">this</span>.setVar(<span class="keyword">var</span>);</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setVar</span><span class="params">(T <span class="keyword">var</span>)</span></span>&#123;</span><br><span class="line">                  <span class="keyword">this</span>.<span class="keyword">var</span>=<span class="keyword">var</span>;</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="function"><span class="keyword">public</span> T <span class="title">getVar</span><span class="params">()</span></span>&#123;</span><br><span class="line">                  <span class="keyword">return</span> <span class="keyword">this</span>.<span class="keyword">var</span>;</span><br><span class="line">      &#125;   </span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span></span>&#123;</span><br><span class="line">      <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String args)</span></span>&#123;</span><br><span class="line">              Info&lt;String&gt; i=<span class="keyword">null</span>;</span><br><span class="line">              i=<span class="keyword">new</span> InfoImpl&lt;String&gt;(<span class="string">"hansheng"</span>);</span><br><span class="line">              System.out.println(<span class="string">"content"</span>+i.getVar());</span><br><span class="line">      &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>类型判断</strong></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">Class c1=<span class="keyword">new</span> ArrayList&lt;Integer&gt;().getClass();</span><br><span class="line">Class c2=<span class="keyword">new</span> ArrayList&lt;String&gt;().getClass();</span><br><span class="line">System.out.println(c1==c2);</span><br><span class="line"><span class="comment">//返回true</span></span><br></pre></td></tr></table></figure>
<h4 id="通配符"><a href="#通配符" class="headerlink" title="通配符"></a>通配符</h4><p>&lt;? extends XXX&gt;<br>能获取，但是向上转型成XXX；不能插入，因为XXX的子类很多，不能确定你插入哪一种<br>&lt;? super XXX&gt;<br>能插入XXX或XXX的子类，但是存入时会向上转型成XXX；不能获取，因为XXX的父类很多，不知道获取的类型，但是如果用基类Object或者强制类型转换(XX)是可以获取的<br>&lt;?&gt;<br>一个无法确定的类型，不能获取，不能插入</p>
<h4 id="上边界限定通配符"><a href="#上边界限定通配符" class="headerlink" title="上边界限定通配符"></a>上边界限定通配符</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">List&lt;? extends Father&gt; list1 = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line"><span class="comment">//不能插入任何元素</span></span><br><span class="line"><span class="comment">//list1.add(new Child());</span></span><br><span class="line"><span class="comment">//list1.add(new Father());</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//可以进行下面的赋值</span></span><br><span class="line">List&lt;Child&gt; list2 = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">list2.add(<span class="keyword">new</span> Child());</span><br><span class="line">List&lt;? extends Father&gt; list3 = list2;</span><br><span class="line"></span><br><span class="line"><span class="comment">//可以取值，但是会被向上转型成Father</span></span><br><span class="line">Father father = list3.get(<span class="number">0</span>);</span><br><span class="line">Object object = list3.get(<span class="number">0</span>);</span><br></pre></td></tr></table></figure>
<h4 id="下边界限定通配符"><a href="#下边界限定通配符" class="headerlink" title="下边界限定通配符"></a>下边界限定通配符</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">List&lt;? <span class="keyword">super</span> Child&gt; list1 = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line"><span class="comment">//可以插入Child或Child的子类，插入时会被向上转型成Child</span></span><br><span class="line">list1.add(<span class="keyword">new</span> Child());</span><br><span class="line">list1.add(<span class="keyword">new</span> Baby());</span><br><span class="line"></span><br><span class="line"><span class="comment">//可以进行下面的赋值</span></span><br><span class="line">List&lt;Father&gt; list2 = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">list2.add(<span class="keyword">new</span> Father());</span><br><span class="line">List&lt;? <span class="keyword">super</span> Child&gt; list3 = list2;</span><br><span class="line"></span><br><span class="line"><span class="comment">//可以这样取值</span></span><br><span class="line">Child child = (Child)list1.get(<span class="number">0</span>);</span><br><span class="line">Father father = (Father)list1.get(<span class="number">0</span>);</span><br></pre></td></tr></table></figure>
<h4 id="边界通配符"><a href="#边界通配符" class="headerlink" title="边界通配符"></a>边界通配符</h4><p><code>List&lt;?&gt; list</code> 表示 <code>list</code> 是持有某种特定类型的 List，但是不知道具体是哪种类型。<br>因为并不知道实际是哪种类型，所以不能添加任何类型，这是不安全的。</p>
<p>和<code>List list</code>相比也就是没有传入泛型参数，表示这个 list 持有的元素的类型是 Object，因此可以添加任何类型的对象，只不过编译器会有警告信息。</p>
<p>参考：<br><a href="https://segmentfault.com/a/1190000005337789" target="_blank" rel="noopener">https://segmentfault.com/a/1190000005337789</a><br><a href="http://www.jianshu.com/p/2005318f171f" target="_blank" rel="noopener">http://www.jianshu.com/p/2005318f171f</a></p>
<h3 id="多线程"><a href="#多线程" class="headerlink" title="多线程"></a>多线程</h3><ul>
<li><strong>通过实现Runable接口</strong></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DisplayMessage</span> <span class="keyword">implements</span> <span class="title">Runnable</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">   <span class="keyword">private</span> String message;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="title">DisplayMessage</span><span class="params">(String message)</span></span></span><br><span class="line"><span class="function">   </span>&#123;</span><br><span class="line">      <span class="keyword">this</span>.message = message;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span></span><br><span class="line"><span class="function">   </span>&#123;</span><br><span class="line">      <span class="keyword">while</span>(<span class="keyword">true</span>)</span><br><span class="line">      &#123;</span><br><span class="line">         System.out.println(message);</span><br><span class="line">      &#125;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>通过继承Thread类本身</strong></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GuessANumber</span> <span class="keyword">extends</span> <span class="title">Thread</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">   <span class="keyword">private</span> <span class="keyword">int</span> number;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="title">GuessANumber</span><span class="params">(<span class="keyword">int</span> number)</span></span></span><br><span class="line"><span class="function">   </span>&#123;</span><br><span class="line">      <span class="keyword">this</span>.number = number;</span><br><span class="line">   &#125;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span></span><br><span class="line"><span class="function">   </span>&#123;</span><br><span class="line">      System.out.println(number);</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>测试</strong></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ThreadClassDemo</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">   <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String [] args)</span></span></span><br><span class="line"><span class="function">   </span>&#123;</span><br><span class="line">      Runnable hello = <span class="keyword">new</span> DisplayMessage(<span class="string">"Hello"</span>);</span><br><span class="line">     <span class="comment">//把接口传入线程，进行线程初始化</span></span><br><span class="line">      Thread thread1 = <span class="keyword">new</span> Thread(hello);</span><br><span class="line">     <span class="comment">//将该线程标记为守护线程或用户线程</span></span><br><span class="line">      thread1.setDaemon(<span class="keyword">true</span>);</span><br><span class="line">     <span class="comment">//改变线程名称，使之与参数 name 相同</span></span><br><span class="line">      thread1.setName(<span class="string">"hello"</span>);</span><br><span class="line">     <span class="comment">//使该线程开始执行</span></span><br><span class="line">      thread1.start();</span><br><span class="line">     </span><br><span class="line">      Thread thread2 = <span class="keyword">new</span> GuessANumber(<span class="number">27</span>);</span><br><span class="line">      thread2.start();</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="IO处理"><a href="#IO处理" class="headerlink" title="IO处理"></a>IO处理</h3><p><img src="Java-advanced/IO.jpeg" alt="IO图"></p>
<ul>
<li><strong>字节和字符的关系</strong><ul>
<li>1个字节＝8位</li>
<li>1个字符＝2字节=16位</li>
<li>一个汉字是2字符，全角符号也2字符，半角就一个字符</li>
<li>byte 1字节</li>
<li>short 2字节</li>
<li>int 4字节</li>
<li>long 8字节</li>
<li>char 2字节(字符)</li>
<li>float 4字节</li>
<li>double 8字节</li>
</ul>
</li>
</ul>
<ul>
<li><p><strong>File类操作API</strong></p>
<ul>
<li><p>File实例可以是目录也可以是文件</p>
</li>
<li><p><strong>路径分隔符</strong></p>
<ul>
<li>windows下的路径分隔符是<code>\</code>，又因为<code>\</code>表示转义字符，所以需要两个<code>\</code>，如”C:\\a.txt”</li>
<li>Linux下的路径符是<code>/</code>，如/User/frank/document/b.txt</li>
</ul>
</li>
<li><p><strong>构造函数</strong></p>
</li>
<li><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FileDemo</span> </span>&#123;</span><br><span class="line">     <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">         <span class="comment">//File(String pathName)</span></span><br><span class="line">         File f1 =<span class="keyword">new</span> File(<span class="string">"c:\\abc\\1.txt"</span>);</span><br><span class="line">         <span class="comment">//File(String parent,String child)</span></span><br><span class="line">         File f2 =<span class="keyword">new</span> File(<span class="string">"c:\\abc"</span>,<span class="string">"2.txt"</span>);</span><br><span class="line">         <span class="comment">//File(File parent,String child)</span></span><br><span class="line">         File f3 =<span class="keyword">new</span> File(<span class="string">"c:"</span>+File.separator+<span class="string">"abc"</span>);<span class="comment">//separator 跨平台分隔符，创建文件夹</span></span><br><span class="line">         File f4 =<span class="keyword">new</span> File(f3,<span class="string">"3.txt"</span>);</span><br><span class="line">         System.out.println(f1);</span><br><span class="line">     &#125;</span><br><span class="line"> &#125;</span><br><span class="line"><span class="comment">//输出：c:\abc\1.txt</span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>创建方法</strong></p>
</li>
<li><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">boolean</span> <span class="title">createNewFile</span><span class="params">()</span> <span class="comment">//不存在返回true 存在返回false</span></span></span><br><span class="line"><span class="function"><span class="keyword">boolean</span> <span class="title">mkdir</span><span class="params">()</span> <span class="comment">//创建目录</span></span></span><br><span class="line"><span class="function"><span class="keyword">boolean</span> <span class="title">mkdirs</span><span class="params">()</span> <span class="comment">//创建多级目录</span></span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>删除方法</strong></p>
</li>
<li><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">boolean</span> <span class="title">delete</span><span class="params">()</span> <span class="comment">//删除File对象对应的文件或路径</span></span></span><br><span class="line"><span class="function"><span class="keyword">boolean</span> <span class="title">deleteOnExit</span><span class="params">()</span> <span class="comment">//当java虚拟机退出时，删除File对象对应的文件或路径</span></span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>判断方法</strong></p>
</li>
<li><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">boolean</span> <span class="title">canExecute</span><span class="params">()</span> <span class="comment">//判断File对象对应的文件是否可执行</span></span></span><br><span class="line"><span class="function"><span class="keyword">boolean</span> <span class="title">canRead</span><span class="params">()</span> <span class="comment">//判断File对象对应的目录或文件是否可读</span></span></span><br><span class="line"><span class="function"><span class="keyword">boolean</span> <span class="title">canWrite</span><span class="params">()</span> <span class="comment">//判断File对象对应的目录或文件是否可写</span></span></span><br><span class="line"><span class="function"><span class="keyword">boolean</span> <span class="title">exists</span><span class="params">()</span> <span class="comment">//判断File对象对应的目录或文件是否存在</span></span></span><br><span class="line"><span class="function"><span class="keyword">boolean</span> <span class="title">isDirectory</span><span class="params">()</span> <span class="comment">//判断File对象对应的是目录，不是文件</span></span></span><br><span class="line"><span class="function"><span class="keyword">boolean</span> <span class="title">isFile</span><span class="params">()</span> <span class="comment">//判断File对象对应的是文件，不是目录</span></span></span><br><span class="line"><span class="function"><span class="keyword">boolean</span> <span class="title">isHidden</span><span class="params">()</span> <span class="comment">//判断File对象对应的文件是否隐藏</span></span></span><br><span class="line"><span class="function"><span class="keyword">boolean</span> <span class="title">isAbsolute</span><span class="params">()</span> <span class="comment">//判断File对象对应的目录或文件是否是绝对路径</span></span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>获取方法</strong></p>
</li>
<li><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">String <span class="title">getName</span><span class="params">()</span> <span class="comment">//获取File对象对应的目录名或文件名</span></span></span><br><span class="line"><span class="function">String <span class="title">getPath</span><span class="params">()</span> <span class="comment">//获取File对象对应的路径名</span></span></span><br><span class="line"><span class="function">String <span class="title">getAbsolutePath</span><span class="params">()</span> <span class="comment">//获取File对象绝对路径</span></span></span><br><span class="line"><span class="function">String <span class="title">getParent</span><span class="params">()</span> <span class="comment">//获取File对象对应的父目录名，如果没有父目录返回null</span></span></span><br><span class="line"><span class="function"><span class="keyword">long</span> <span class="title">lastModified</span><span class="params">()</span> <span class="comment">//获取文件最后一次修改的时间</span></span></span><br><span class="line"><span class="function"><span class="keyword">long</span> <span class="title">length</span><span class="params">()</span> <span class="comment">//获取文件内容的长度</span></span></span><br><span class="line"><span class="function"><span class="keyword">boolean</span> <span class="title">renameTo</span><span class="params">(File f)</span> <span class="comment">//重命名File对象对应的目录或文件，成功返回true</span></span></span><br><span class="line"><span class="function">File[] <span class="title">liseRoots</span><span class="params">()</span> <span class="comment">//获取系统的所有根路径</span></span></span><br><span class="line"><span class="function">String[] <span class="title">list</span><span class="params">()</span> <span class="comment">//获取File对象的所有子路径名或子文件名</span></span></span><br><span class="line"><span class="function">File[] <span class="title">listFiles</span><span class="params">()</span> <span class="comment">//获取File对象的所有子路径或子文件</span></span></span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p><strong>字符流和字节流的主要区别</strong></p>
<ul>
<li>字节流读取的时候，读到一个字节就返回一个字节；  字符流使用了字节流读到一个或多个字节（中文对应的字节数是两个，在UTF-8码表中是3个字节）时。先去查指定的编码表，将查到的字符返回。</li>
<li>字节流可以处理所有类型数据，如：图片，MP3，AVI视频文件，而字符流只能处理字符数据。只要是处理纯文本数据，就要优先考虑使用字符流，除此之外都用字节流</li>
</ul>
</li>
<li><p><strong>输入和输出</strong></p>
<ul>
<li>输入(InputStream)是指从文件输入到内存（程序），输出(OutputStream)是指从内存（程序）输出到文件</li>
</ul>
</li>
<li><p><strong>字节流</strong></p>
<ul>
<li><p><strong>方法</strong></p>
</li>
<li><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;InputStream&gt;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">read</span><span class="params">()</span> <span class="comment">//从输入流中读取单个字节</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">read</span><span class="params">(<span class="keyword">byte</span>[] b)</span> <span class="comment">//从输入流中最多读取b.length个字节的数据，并将其储存在字节数组b中，返回实际读取的字节数</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">read</span><span class="params">(<span class="keyword">byte</span>[] b, <span class="keyword">int</span> off, <span class="keyword">int</span> len)</span> <span class="comment">//从输入流中最多读取len个字节，并将其储存在字节数组b中，并不是从数组起点开始，而是从off位置开始，返回实际读取的字节数</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">&lt;OutputStream&gt;</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">write</span><span class="params">(<span class="keyword">int</span> c)</span> <span class="comment">//将指定的字节输出到输出流</span></span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">write</span><span class="params">(<span class="keyword">byte</span>[] buf)</span> <span class="comment">//将字节数组中的数据输出到指定的输出流中</span></span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">write</span><span class="params">(<span class="keyword">byte</span>[] buf,<span class="keyword">int</span> off,<span class="keyword">int</span> len)</span> <span class="comment">//将字节数组中从off位置开始，长度为len的数据输出到指定的输出流中</span></span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>使用字节流读数据</strong></p>
</li>
<li><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.FileInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ReadByteStream</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        FileInputStream fis = <span class="keyword">null</span>; <span class="comment">// 声明文件输入流对象</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            fis = <span class="keyword">new</span> FileInputStream(<span class="string">"test.txt"</span>); <span class="comment">// test.txt文件在当前工程目录下事先创建好</span></span><br><span class="line">            <span class="keyword">byte</span> input[] = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">30</span>];</span><br><span class="line">            fis.read(input); <span class="comment">// 读入到一个字节数组</span></span><br><span class="line">			</span><br><span class="line">          <span class="comment">//转化到字符串str中</span></span><br><span class="line">            String str = <span class="keyword">new</span> String(input, <span class="string">"UTF-8"</span>); <span class="comment">// 字符编码要与读入的文件对应</span></span><br><span class="line">            System.out.println(str);</span><br><span class="line">          </span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                fis.close(); <span class="comment">// 关闭输入流</span></span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>使用字节流写数据</strong></p>
</li>
<li><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.FileOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">WriteByteStream</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        FileOutputStream fos = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="comment">//里面true参数表示不覆盖原文件，直接在文件后面追加添加内容</span></span><br><span class="line">            fos = <span class="keyword">new</span> FileOutputStream(<span class="string">"test2.txt"</span>,<span class="keyword">true</span>);</span><br><span class="line"></span><br><span class="line">            String str = <span class="string">"1234567"</span>;</span><br><span class="line">            <span class="keyword">byte</span>[] outStr = str.getBytes(<span class="string">"UTF-8"</span>); <span class="comment">// 读入字节数组，并指定编码方式</span></span><br><span class="line">            fos.write(outStr); <span class="comment">// 使用文件输出流写出到文件</span></span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                fos.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>使用字节流拷贝文件</strong></p>
</li>
<li><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.FileInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.FileOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CopyFile</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        FileInputStream fis = <span class="keyword">null</span>;</span><br><span class="line">        FileOutputStream fos = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            fis = <span class="keyword">new</span> FileInputStream(<span class="string">"test.png"</span>);</span><br><span class="line">            fos = <span class="keyword">new</span> FileOutputStream(<span class="string">"test_new.png"</span>);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">byte</span> input[] = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">50</span>]; <span class="comment">// 每次读取50 bytes</span></span><br><span class="line"></span><br><span class="line">            <span class="keyword">while</span> (fis.read(input) != -<span class="number">1</span>) &#123; <span class="comment">// read返回读入的数据大小，如果没有数据返回-1</span></span><br><span class="line">                fos.write(input); <span class="comment">// 每次写入50 bytes</span></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            System.out.println(<span class="string">"done"</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                fis.close();</span><br><span class="line">                fos.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>使用带缓冲的字节流读写数据</strong></p>
<ul>
<li>不带缓冲的操作, 每读一个字节就要写入一个字节, 由于涉及磁盘的IO操作相比内存的操作要慢很多, 所以不带缓冲的流效率很低  </li>
<li>带缓冲的流, 可以一次读很多字节, 但不向磁盘中写入, 只是先放到内存里. 等凑够了缓冲区大小的时候一次性写入磁盘, 这种方式可以减少磁盘操作次数, 速度就会提高很多!  </li>
<li>带缓冲的流适合读写比较大的文件</li>
</ul>
</li>
<li><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.BufferedInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.BufferedOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.FileInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.FileNotFoundException;</span><br><span class="line"><span class="keyword">import</span> java.io.FileOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ReadByBufferedByteStream</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            FileInputStream fis = <span class="keyword">new</span> FileInputStream(<span class="string">"movie.mp4"</span>);</span><br><span class="line">          	<span class="comment">// 缓冲区大小1000000字节</span></span><br><span class="line">            BufferedInputStream bis = <span class="keyword">new</span> BufferedInputStream(fis,<span class="number">1000000</span>); </span><br><span class="line">            FileOutputStream fos = <span class="keyword">new</span> FileOutputStream(<span class="string">"moive_new.mp4"</span>);</span><br><span class="line">            BufferedOutputStream bos = <span class="keyword">new</span> BufferedOutputStream(fos,<span class="number">1000000</span>); </span><br><span class="line">          </span><br><span class="line">            <span class="comment">//大型文件对应的数组可以大一些，小文件对应的数组小一些</span></span><br><span class="line">            <span class="keyword">byte</span> input[] = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">100000</span>]; </span><br><span class="line">            <span class="keyword">int</span> count = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">long</span> before = System.currentTimeMillis(); <span class="comment">// 开始计时</span></span><br><span class="line">            <span class="keyword">while</span> (bis.read(input) != -<span class="number">1</span>) &#123;</span><br><span class="line">                bos.write(input);</span><br><span class="line">                count++;</span><br><span class="line">            &#125;</span><br><span class="line">            bos.flush();</span><br><span class="line">            bis.close();</span><br><span class="line">            fis.close();</span><br><span class="line">            bos.close();</span><br><span class="line">            fos.close();</span><br><span class="line">            System.out.println(System.currentTimeMillis()-before+<span class="string">"ms"</span>); <span class="comment">// 总时长</span></span><br><span class="line">            System.out.println(<span class="string">"读取了："</span>+count+<span class="string">"次"</span>);</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (FileNotFoundException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p><strong>字符流</strong></p>
<ul>
<li><p><strong>方法</strong></p>
</li>
<li><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;Reader&gt;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">read</span><span class="params">()</span> <span class="comment">//从输入流中读取单个字符</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">read</span><span class="params">(<span class="keyword">char</span>[] cbuf)</span> <span class="comment">//从输入流中最多读取cbuf.length个字符的数据，并将其储存在字符数组cbuf中，返回实际读取的字符数</span></span></span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">read</span><span class="params">(<span class="keyword">byte</span>[] cbuf, <span class="keyword">int</span> off, <span class="keyword">int</span> len)</span> <span class="comment">//从输入流中最多读取len个字符，并将其储存在字符数组cbuf中，并不是从数组起点开始，而是从off位置开始，返回实际读取的字符数</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">&lt;Writer&gt;</span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">write</span><span class="params">(<span class="keyword">int</span> c)</span> <span class="comment">//将指定的字符输出到输出流</span></span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">write</span><span class="params">(<span class="keyword">char</span>[] buf)</span> <span class="comment">//将字符数组中的数据输出到指定的输出流中</span></span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">write</span><span class="params">(<span class="keyword">char</span>[] buf,<span class="keyword">int</span> off,<span class="keyword">int</span> len)</span> <span class="comment">//将字符数组中从off位置开始，长度为len的数据输出到指定的输出流</span></span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function"><span class="comment">//因为字符流直接以字符作为操作单位，所以Writer可以用字符串来代替字符数组</span></span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">write</span><span class="params">(String str)</span> <span class="comment">//将str字符串中包含的字符输出到输出流</span></span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">write</span><span class="params">(String str,<span class="keyword">int</span> off,<span class="keyword">int</span> len)</span> <span class="comment">//将str字符串中从off位置开始，长度为len的数据输出到指定的输出流</span></span></span><br><span class="line"><span class="function"><span class="comment">//因为字符流直接以字符作为操作单位，所以Writer可以用字符串来代替字符数组</span></span></span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>使用字符流读写数据</strong></p>
</li>
<li><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.FileInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.FileOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStreamReader;</span><br><span class="line"><span class="keyword">import</span> java.io.OutputStreamWriter;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RWByCharStream</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line"></span><br><span class="line">            FileInputStream fis = <span class="keyword">new</span> FileInputStream(<span class="string">"java.txt"</span>);</span><br><span class="line">            FileOutputStream fos = <span class="keyword">new</span> FileOutputStream(<span class="string">"java_new.txt"</span>);</span><br><span class="line">          	<span class="comment">// 字符流的使用要传入字节流作为参数</span></span><br><span class="line">            InputStreamReader reader = <span class="keyword">new</span> InputStreamReader(fis, <span class="string">"UTF-8"</span>); </span><br><span class="line">            OutputStreamWriter writer = <span class="keyword">new</span> OutputStreamWriter(fos, <span class="string">"UTF-8"</span>);</span><br><span class="line"></span><br><span class="line">            <span class="keyword">char</span> input[] = <span class="keyword">new</span> <span class="keyword">char</span>[<span class="number">100</span>]; <span class="comment">// 每次读取的数据大小</span></span><br><span class="line">            <span class="keyword">int</span> l = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">while</span> ((l = reader.read(input)) != -<span class="number">1</span>) &#123;</span><br><span class="line">                <span class="comment">// void write(char cbuf[], int off, int len)</span></span><br><span class="line">                <span class="comment">// 文件末尾的长度不一定是100，所以需要设置写入数据长度</span></span><br><span class="line">                writer.write(input, <span class="number">0</span>, l);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            reader.close(); <span class="comment">// 先关闭字符流</span></span><br><span class="line">            fis.close(); <span class="comment">// 再关闭字节流</span></span><br><span class="line">            writer.close();</span><br><span class="line">            fos.close();</span><br><span class="line"></span><br><span class="line">            System.out.println(<span class="string">"done"</span>);</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>使用带缓冲的字符流读写数据</strong></p>
<ul>
<li>使用字符流读取数据时不能按行读取，这时候就需要使用带有缓冲区的字符流。</li>
</ul>
</li>
<li><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.BufferedReader;</span><br><span class="line"><span class="keyword">import</span> java.io.FileInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.FileOutputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStreamReader;</span><br><span class="line"><span class="keyword">import</span> java.io.OutputStreamWriter;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"><span class="keyword">import</span> java.io.Writer;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RWByBufferedCharStream</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line"></span><br><span class="line">            FileInputStream fis = <span class="keyword">new</span> FileInputStream(<span class="string">"java.txt"</span>);</span><br><span class="line">            FileOutputStream fos = <span class="keyword">new</span> FileOutputStream(<span class="string">"java_new_buff.txt"</span>);</span><br><span class="line"></span><br><span class="line">            InputStreamReader reader = <span class="keyword">new</span> InputStreamReader(fis, <span class="string">"UTF-8"</span>);</span><br><span class="line">            OutputStreamWriter writer = <span class="keyword">new</span> OutputStreamWriter(fos, <span class="string">"UTF-8"</span>);</span><br><span class="line"></span><br><span class="line">            BufferedReader br = <span class="keyword">new</span> BufferedReader(reader);</span><br><span class="line">            <span class="comment">// BufferedWriter bw = new BufferedWriter(writer);</span></span><br><span class="line">            <span class="comment">// PrintWriter和BufferedWriter用法类似</span></span><br><span class="line">            <span class="comment">// PrintWriter可以输出换行符</span></span><br><span class="line">            <span class="comment">// 构造方法PrintWriter(Writer out,boolean autoFlush) 里可以设置缓冲区自动输出，这样就不需要手动调用flush方法了。</span></span><br><span class="line">            PrintWriter pw = <span class="keyword">new</span> PrintWriter(writer, <span class="keyword">true</span>);</span><br><span class="line"></span><br><span class="line">            String input;</span><br><span class="line">            <span class="keyword">while</span> ((input = br.readLine()) != <span class="keyword">null</span>) &#123; <span class="comment">// BufferedReader可以按行读取</span></span><br><span class="line">                <span class="comment">// bw.write(input); //</span></span><br><span class="line">                <span class="comment">// BufferedWriter的writer方法是带有缓冲区的，此时打印的文本是不带换行符的</span></span><br><span class="line">                pw.println(input);<span class="comment">// PrintWriter的println方法支持不同平台的换行符输出</span></span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// bw.flush(); // 强制输出缓冲区内容。如果不加上flush，最后的缓冲区未读满将不输出内容</span></span><br><span class="line"></span><br><span class="line">            <span class="comment">// bw.close();</span></span><br><span class="line">            pw.close();<span class="comment">// 按顺序关闭流</span></span><br><span class="line">            writer.close();</span><br><span class="line">            fos.close();</span><br><span class="line"></span><br><span class="line">            br.close();</span><br><span class="line">            reader.close();</span><br><span class="line">            fis.close();</span><br><span class="line"></span><br><span class="line">            System.out.println(<span class="string">"done"</span>);</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>FileReader 和FileWriter</strong></p>
<ul>
<li>FileReader 和FileWriter 专门用于操作文本文件. 用法与FileInputStream 类似</li>
</ul>
</li>
<li><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.io.BufferedReader;</span><br><span class="line"><span class="keyword">import</span> java.io.BufferedWriter;</span><br><span class="line"><span class="keyword">import</span> java.io.FileReader;</span><br><span class="line"><span class="keyword">import</span> java.io.FileWriter;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FileRW</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">        FileReader fr = <span class="keyword">null</span>;</span><br><span class="line">        BufferedReader br = <span class="keyword">null</span>;</span><br><span class="line">        FileWriter fw = <span class="keyword">null</span>;</span><br><span class="line">        BufferedWriter bw = <span class="keyword">null</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            fr = <span class="keyword">new</span> FileReader(<span class="string">"java.txt"</span>);</span><br><span class="line">            br = <span class="keyword">new</span> BufferedReader(fr);</span><br><span class="line">            fw = <span class="keyword">new</span> FileWriter(<span class="string">"java_new.txt"</span>);</span><br><span class="line">            bw = <span class="keyword">new</span> BufferedWriter(fw);</span><br><span class="line"></span><br><span class="line">            String line;</span><br><span class="line">            <span class="keyword">while</span> ((line = br.readLine()) != <span class="keyword">null</span>) &#123;</span><br><span class="line">                bw.write(line + <span class="string">"\n"</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            bw.flush();</span><br><span class="line">            System.out.println(<span class="string">"done"</span>);</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                bw.close();</span><br><span class="line">                fw.close();</span><br><span class="line">                br.close();</span><br><span class="line">                fr.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p><strong>相互转化</strong></p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//用字节流读取文件，再转成字符流</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestIO</span> </span>&#123;</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">  	FileInputStream fis = <span class="keyword">new</span> FileInputStream(<span class="string">"c:\\abc.txt"</span>);<span class="comment">// 字节流</span></span><br><span class="line">	InputStreamReader isr = <span class="keyword">new</span> InputStreamReader(fis);<span class="comment">// 字符流</span></span><br><span class="line">    BufferedReader br = <span class="keyword">new</span> BufferedReader(isr);<span class="comment">// 缓冲流</span></span><br><span class="line">  	String str = <span class="keyword">null</span>;</span><br><span class="line"> 	<span class="keyword">if</span> ((str = br.readLine()) != <span class="keyword">null</span>) &#123;</span><br><span class="line">      System.out.println(str);</span><br><span class="line">    &#125;</span><br><span class="line">    br.close();</span><br><span class="line">    isr.close();</span><br><span class="line">    fis.close();</span><br><span class="line"> 	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//没有字符流转字节流，因为实际开发用不到，所有相关API也没有了</span></span><br><span class="line"><span class="comment">//直接字符流读取文件</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestIO</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">    FileReader fr = <span class="keyword">new</span> FileReader(<span class="string">"c:\\abc.txt"</span>);<span class="comment">// 字符流</span></span><br><span class="line">    BufferedReader br = <span class="keyword">new</span> BufferedReader(fr);<span class="comment">// 缓冲流</span></span><br><span class="line">    String str = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">if</span> ((str = br.readLine()) != <span class="keyword">null</span>) &#123;</span><br><span class="line">    	System.out.println(str);</span><br><span class="line">    &#125;</span><br><span class="line">    fr.close();</span><br><span class="line">    br.close();</span><br><span class="line">  ｝</span><br><span class="line">｝</span><br></pre></td></tr></table></figure>
<h3 id="Java-Nio"><a href="#Java-Nio" class="headerlink" title="Java Nio"></a>Java Nio</h3><h4 id="阻塞和非阻塞（都是同步）"><a href="#阻塞和非阻塞（都是同步）" class="headerlink" title="阻塞和非阻塞（都是同步）"></a>阻塞和非阻塞（都是同步）</h4><p>阻塞是询问后阻塞到有结果再返回<br>非阻塞询问后没结果则返回不等待</p>
<h4 id="同步和异步"><a href="#同步和异步" class="headerlink" title="同步和异步"></a>同步和异步</h4><p>同步是从上到下地顺序运行<br>异步是分一个任务，在有空的时候执行，返回结果的时候通知主任务<br>区别：<br>同步是主动地执行，异步是被动地执行</p>
<h4 id="Channel"><a href="#Channel" class="headerlink" title="Channel"></a>Channel</h4><p>Channel国内大多翻译成“通道”。Channel和IO中的Stream(流)是差不多一个等级的。只不过Stream是单向的，譬如：InputStream, OutputStream。而Channel是双向的，既可以用来进行读操作，又可以用来进行写操作，NIO中的Channel的主要实现有：FileChannel、DatagramChannel、SocketChannel、ServerSocketChannel；通过看名字就可以猜出个所以然来：分别可以对应文件IO、UDP和TCP（Server和Client）。</p>
<h4 id="Buffer"><a href="#Buffer" class="headerlink" title="Buffer"></a>Buffer</h4><p>NIO中的关键Buffer实现有：ByteBuffer、CharBuffer、DoubleBuffer、 FloatBuffer、IntBuffer、 LongBuffer,、ShortBuffer，分别对应基本数据类型: byte、char、double、 float、int、 long、 short。当然NIO中还有MappedByteBuffer, HeapByteBuffer, DirectByteBuffer等这里先不具体陈述其用法细节。</p>
<h4 id="Selector"><a href="#Selector" class="headerlink" title="Selector"></a>Selector</h4><p>Selector 是NIO相对于BIO实现多路复用的基础，Selector 运行单线程处理多个 Channel，如果你的应用打开了多个通道，但每个连接的流量都很低，使用 Selector 就会很方便。例如在一个聊天服务器中。要使用 Selector , 得向 Selector 注册 Channel，然后调用它的 select() 方法。这个方法会一直阻塞到某个注册的通道有事件就绪。一旦这个方法返回，线程就可以处理这些事件，事件的例子有如新的连接进来、数据接收等。</p>
<p><a href="https://mp.weixin.qq.com/s?__biz=MzIzMzgxOTQ5NA==&amp;mid=2247483922&amp;idx=1&amp;sn=c9fdc5cd64df5a412b9dc2fc6f9e4880&amp;chksm=e8fe9e1bdf89170d9f0d08dc0320b15238869dd6c8b9496d82b1af75d0ddc102327438029a89&amp;mpshare=1&amp;scene=23&amp;srcid=0807O7xIaN4cSgfRHLv4ZWgq#rd" target="_blank" rel="noopener">Java nio介绍看这篇就够了</a></p>
<h3 id="邮箱"><a href="#邮箱" class="headerlink" title="邮箱"></a>邮箱</h3><ul>
<li><strong>准备</strong><ul>
<li>要使用Java的邮箱功能需要javax.mail这个jar包</li>
</ul>
</li>
<li><strong>SMTP</strong><ul>
<li>简单邮件传输协议</li>
</ul>
</li>
<li><strong>POP3</strong><ul>
<li>邮局协议</li>
</ul>
</li>
<li><strong>最简单的邮件传输</strong><ul>
<li>不包附件，只有正文部分，并且只是负责邮件的发送，因此只需要SMTP，当要读取邮件的时候就必须要使用POP3</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">sendEmail</span><span class="params">()</span></span>&#123;    </span><br><span class="line">	String FROM = <span class="string">"3427545623@163.com"</span>;<span class="comment">//发件人的email</span></span><br><span class="line">    String PWD = <span class="string">"***********"</span>;<span class="comment">//发件人授权码(不同于密码)，开通SMTP服务后会需要设置授权码</span></span><br><span class="line"></span><br><span class="line">	String HOST = <span class="string">"smtp.163.com"</span>;<span class="comment">//设置邮件服务主机，每个服务商的邮件服务器地址都不一样</span></span><br><span class="line">    String PROTOCOL = <span class="string">"smtp"</span>;<span class="comment">//传输协议</span></span><br><span class="line">    <span class="keyword">int</span> PORT = <span class="number">25</span>;<span class="comment">//端口号</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//创建Properties类用于保存邮箱环境的属性</span></span><br><span class="line">    Properties props = <span class="keyword">new</span> Properties();</span><br><span class="line">    props.put(<span class="string">"mail.smtp.host"</span>, HOST);<span class="comment">//设置服务器地址</span></span><br><span class="line">    props.put(<span class="string">"mail.store.protocol"</span> , PROTOCOL);<span class="comment">//设置协议</span></span><br><span class="line">	props.put(<span class="string">"mail.smtp.port"</span>, PORT);<span class="comment">//设置端口</span></span><br><span class="line">    props.put(<span class="string">"mail.smtp.auth"</span>, <span class="keyword">true</span>);<span class="comment">//表示SMTP发送邮件，必须进行身份验证</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//发送者的邮箱地址和口令也可以在这里设置，之后也可以拿出</span></span><br><span class="line">    <span class="comment">//props.put("mail.user", "3427545623@163.com");//此处填写你的账号</span></span><br><span class="line">    <span class="comment">//props.put("mail.password", "***********");// 发件人授权码,也就是STMP口令</span></span><br><span class="line"></span><br><span class="line">	<span class="comment">//实例化Authenticator这个抽象类，这里重写getPasswordAuthentication方法</span></span><br><span class="line">    Authenticator authenticator = <span class="keyword">new</span> Authenticator() &#123;</span><br><span class="line">        <span class="meta">@Override</span></span><br><span class="line">        <span class="function"><span class="keyword">protected</span> PasswordAuthentication <span class="title">getPasswordAuthentication</span><span class="params">()</span> </span>&#123;</span><br><span class="line">          <span class="comment">//传入发送者邮箱和密码</span></span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">new</span> PasswordAuthentication(FROM, PWD);</span><br><span class="line">          <span class="comment">//从环境属性中拿出</span></span><br><span class="line">          <span class="comment">//String userName = props.getProperty("mail.user");</span></span><br><span class="line">          <span class="comment">//String password = props.getProperty("mail.password");</span></span><br><span class="line">          <span class="comment">//return new PasswordAuthentication(userName, password);</span></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">	<span class="comment">//使用环境属性和授权信息，创建邮件会话</span></span><br><span class="line">	Session session = Session.getDefaultInstance(props,authenticator);</span><br><span class="line"></span><br><span class="line">	<span class="keyword">try</span> &#123;</span><br><span class="line">		<span class="comment">//传入邮件会话来构造邮件信息对象</span></span><br><span class="line">		Message msg = <span class="keyword">new</span> MimeMessage(session);</span><br><span class="line"></span><br><span class="line">        <span class="comment">//设置Message属性</span></span><br><span class="line">        msg.setFrom(<span class="keyword">new</span> InternetAddress(FROM));<span class="comment">//设置发送者</span></span><br><span class="line">        InternetAddress address = <span class="keyword">new</span> InternetAddress(<span class="string">"593571421@qq.com"</span>);<span class="comment">//获取收件人邮箱的网络地址</span></span><br><span class="line">        msg.setRecipients(Message.RecipientType.TO, address);<span class="comment">//设置收件人的地址</span></span><br><span class="line">        msg.setSubject(<span class="string">"账号激活邮件"</span>);<span class="comment">//设置邮件标题</span></span><br><span class="line">        msg.setSentDate(<span class="keyword">new</span> Date());<span class="comment">//设置发送时间</span></span><br><span class="line">        msg.setContent(<span class="string">"send successfully!"</span>,<span class="string">"text/html;charset=utf-8"</span>);<span class="comment">//设置邮件的内容体和内容格式</span></span><br><span class="line"></span><br><span class="line">        Transport.send(msg);<span class="comment">//发送邮件</span></span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;<span class="keyword">catch</span>(MessagingException mex) &#123;</span><br><span class="line">        mex.printStackTrace();</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h3 id="验证码"><a href="#验证码" class="headerlink" title="验证码"></a>验证码</h3><ul>
<li><a href="http://www.imooc.com/learn/283" target="_blank" rel="noopener">生成验证码</a></li>
<li><a href="http://www.imooc.com/learn/585" target="_blank" rel="noopener">生成图片验证码</a></li>
</ul>
<h3 id="二维码"><a href="#二维码" class="headerlink" title="二维码"></a>二维码</h3><ul>
<li><a href="http://www.imooc.com/learn/531" target="_blank" rel="noopener">java生成二维码</a></li>
</ul>
<h3 id="Excel导入导出"><a href="#Excel导入导出" class="headerlink" title="Excel导入导出"></a>Excel导入导出</h3><ul>
<li><a href="http://www.imooc.com/learn/354" target="_blank" rel="noopener">学习资料</a></li>
</ul>
<h3 id="类加载"><a href="#类加载" class="headerlink" title="类加载"></a>类加载</h3><ul>
<li><p>当程序要使用某个类时，如果该类还未被加载到内存中，则系统会通过<strong>加载</strong>，<strong>连接</strong>，<strong>初始化</strong>三步来实现对这个类进行初始化。</p>
</li>
<li><p><strong>加载</strong></p>
<ul>
<li>通过一个类的全限定名来获取其定义的二进制字节流</li>
<li>将这个字节流所代表的静态存储结构转化为方法区的运行时数据结构</li>
<li>在Java堆中生成一个代表这个类的java.lang.Class对象</li>
</ul>
</li>
<li><p><strong>连接</strong></p>
<ul>
<li><code>验证</code> 为了确保class文件的字节流中包含的信息符合当前虚拟机的要求，并且不会危害虚拟机自身的安全</li>
<li><code>准备</code> 负责为类的静态成员分配内存，并设置默认初始化值</li>
<li><code>解析</code> 虚拟机将常量池中的符号引用替换为直接引用</li>
</ul>
</li>
<li><p><strong>初始化</strong></p>
<ul>
<li>创建类的实例</li>
<li>访问类的静态变量，或者为静态变量赋值</li>
<li>调用类的静态方法</li>
<li>使用反射方式来强制创建某个类或接口对应的<code>java.lang.Class</code>对象</li>
<li>初始化某个类的子类</li>
<li>直接使用java.exe命令来运行某个主类</li>
<li>初始化注意点<ul>
<li>如果类存在直接父类的话，且直接父类还没有被初始化，则先初始化其直接父类</li>
<li>如果类存在一个初始化方法，就执行此方法</li>
<li>初始化接口并不需要初始化它的父接口。</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="类什么时候初始化"><a href="#类什么时候初始化" class="headerlink" title="类什么时候初始化"></a>类什么时候初始化</h4><p>加载完类后，类的初始化就会发生，意味着它会初始化所有类静态成员，以下情况一个类被初始化：</p>
<ul>
<li>实例通过使用new()关键字创建或者使用class.forName()反射，但它有可能导致ClassNotFoundException。</li>
<li>类的静态方法被调用</li>
<li>类的静态域被赋值</li>
<li>静态域被访问，而且它不是常量</li>
<li>在顶层类中执行assert语句</li>
</ul>
<h4 id="类加载器"><a href="#类加载器" class="headerlink" title="类加载器"></a>类加载器</h4><ul>
<li><p>负责将<code>.class</code>文件加载到内存中，并为之生成对应的Class对象。</p>
<p>虽然我们不需要关心类加载机制，但是了解这个机制我们就能更好的理解程序的运行。</p>
<ul>
<li>Bootstrap ClassLoader 根类加载器<ul>
<li>负责加载存放在JDK\jre\lib（JAVA_HOME/lib）的类库</li>
</ul>
</li>
<li>Extension ClassLoader 扩展类加载器<ul>
<li>负责加载存放在JAVA_HOME/lib/ext下的类库</li>
</ul>
</li>
<li>Application ClassLoader 系统类加载器<ul>
<li>负责加载用户类路径（ClassPath）所指定的类</li>
</ul>
</li>
</ul>
</li>
</ul>
<ul>
<li><strong>示例</strong></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> kevin.demo;  </span><br><span class="line">   </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Base</span> </span>&#123;  </span><br><span class="line">    <span class="keyword">int</span> a;  </span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">int</span> b;  </span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">int</span> c = <span class="number">1</span>;  </span><br><span class="line">   </span><br><span class="line">    <span class="keyword">static</span> &#123;  </span><br><span class="line">       b=<span class="number">2</span>;  </span><br><span class="line">       c = <span class="number">3</span>;  </span><br><span class="line">       System.out.println(<span class="string">"Base:static init block invoked.."</span>);  </span><br><span class="line">    &#125;  </span><br><span class="line">   </span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">display</span><span class="params">()</span> </span>&#123;  </span><br><span class="line">       System.out.println(<span class="string">"Base:a="</span> + a + <span class="string">",b="</span> + b + <span class="string">",c="</span> + c);  </span><br><span class="line">    &#125;  </span><br><span class="line">   </span><br><span class="line">&#125;  </span><br><span class="line">   </span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Derived</span> <span class="keyword">extends</span> <span class="title">Base</span> </span>&#123;  </span><br><span class="line">    <span class="keyword">int</span> d;  </span><br><span class="line">    <span class="keyword">static</span> <span class="keyword">int</span> e = <span class="number">4</span>;  </span><br><span class="line">   </span><br><span class="line">    <span class="keyword">static</span> &#123;  </span><br><span class="line">       e= <span class="number">5</span>;  </span><br><span class="line">       System.out.println(<span class="string">"Derived:static init block invoked..."</span>);  </span><br><span class="line">    &#125;  </span><br><span class="line">   </span><br><span class="line">    <span class="function"><span class="keyword">void</span> <span class="title">display</span><span class="params">()</span> </span>&#123;  </span><br><span class="line">       <span class="keyword">super</span>.display();  </span><br><span class="line">       System.out.println(<span class="string">"Derived:d="</span> + d + <span class="string">",e="</span> + e);  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Demo</span> </span>&#123;  </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;  </span><br><span class="line">       <span class="keyword">new</span> Derived().display();  </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">结果：</span><br><span class="line">Base:<span class="keyword">static</span> init block invoked..</span><br><span class="line">Derived:<span class="keyword">static</span> init block invoked...</span><br><span class="line">Base:a=<span class="number">0</span>,b=<span class="number">2</span>,c=<span class="number">3</span></span><br><span class="line">Derived:d=<span class="number">0</span>,e=<span class="number">5</span></span><br></pre></td></tr></table></figure>
<p><strong>JVM类加载机制</strong></p>
<ul>
<li>全盘负责，当一个类加载器负责加载某个Class时，该Class所依赖的和引用的其他Class也将由该类加载器负责载入，除非显示使用另外一个类加载器来载入</li>
<li>父类委托，先让父类加载器试图加载该类，只有在父类加载器无法加载该类时才尝试从自己的类路径中加载该类</li>
<li>缓存机制，缓存机制将会保证所有加载过的Class都会被缓存，当程序中需要使用某个Class时，类加载器先从缓存区寻找该Class，只有缓存区不存在，系统才会读取该类对应的二进制数据，并将其转换成Class对象，存入缓存区。这就是为什么修改了Class后，必须重启JVM，程序的修改才会生效</li>
</ul>
<h4 id="双亲委派模型"><a href="#双亲委派模型" class="headerlink" title="双亲委派模型"></a>双亲委派模型</h4><p>双亲委派模型的工作流程是：如果一个类加载器收到了类加载的请求，它首先不会自己去尝试加载这个类，而是把请求委托给父加载器去完成，依次向上，因此，所有的类加载请求最终都应该被传递到顶层的启动类加载器中，只有当父加载器在它的搜索范围中没有找到所需的类时，即无法完成该加载，子加载器才会尝试自己去加载该类。</p>
<h4 id="JMM内存模型"><a href="#JMM内存模型" class="headerlink" title="JMM内存模型"></a>JMM内存模型</h4><p><img src="Java-advanced/jmm.png" alt><br>JMM规定了所有的变量都存储在主内存（Main Memory）中。每个线程还有自己的工作内存（Working Memory）,线程的工作内存中保存了该线程使用到的变量的主内存的副本拷贝，线程对变量的所有操作（读取、赋值等）都必须在工作内存中进行，而不能直接读写主内存中的变量（volatile变量仍然有工作内存的拷贝，但是由于它特殊的操作顺序性规定，所以看起来如同直接在主内存中读写访问一般）。不同的线程之间也无法直接访问对方工作内存中的变量，线程之间值的传递都需要通过主内存来完成。</p>
<h4 id="JVM的内存结构"><a href="#JVM的内存结构" class="headerlink" title="JVM的内存结构"></a>JVM的内存结构</h4><p>JVM的内存一共分为5个部分:</p>
<ol>
<li><code>程序计数器</code>: 程序计数器（Program Counter Register）是一块较小的内存空间，它的作用可以看做是当前线程所执行的字节码的行号指示器，因为cpu调度线程是轮流切换的，所以每个线程需要程序计数器来记录下一个字节码指令的地址，来恢复到正确的执行位置</li>
<li><code>方法区</code>: 方法区与Java堆一样，是各个线程共享的内存区域，它用于存储已被虚拟机加载的类信息、常量、静态变量、即时编译器编译后的代码等数据，也存放着常量池。</li>
<li><code>虚拟机栈</code>: Java虚拟机栈也是线程私有的，它的生命周期与线程相同。虚拟机栈描述的是Java方法执行的内存模型：每个方法被执行的时候都会同时创建一个栈帧（Stack Frame）用于存储局部变量表、操作栈、动态链接、方法出口等信息。每一个方法被调用直至执行完成的过程，就对应着一个栈帧在虚拟机栈中从入栈到出栈的过程。</li>
<li><code>本地方法栈</code>: 本地方法栈与虚拟机栈所发挥的作用是非常相似的，其区别不过是虚拟机栈为虚拟机执行Java方法（也就是字节码）服务，而本地方法栈则是为虚拟机使用到的Native方法服务</li>
<li><code>堆</code>: Java堆是Java虚拟机所管理的内存中最大的一块。Java堆是被所有线程共享的一块内存区域，在虚拟机启动时创建。此内存区域的唯一目的就是存放对象实例，几乎所有的对象实例都在这里分配内存。</li>
</ol>
<p>JVM堆内存被分为两部分年轻代(Young Generation)和老年代(Old Generation)</p>
<p><img src="Java-advanced/jvm.png" alt></p>
<h5 id="新生代-Young"><a href="#新生代-Young" class="headerlink" title="新生代(Young)"></a>新生代(Young)</h5><p>新生代是所有新对象产生的地方。当年轻代的内存空间被用完时，就会触发垃圾回收。这个垃圾回收叫做Minor GC。新生代分为3个部分Eden区和Survivor区(FromSpace和ToSpace,两个区域大小相同，大小8:1:1)，新生代的大小可以通过-Xmn来控制，也可以用-XX：SurvivorRatio来控制Eden和Survivor的比例。</p>
<p>特点</p>
<p>大多数新建的对象都在Eden区</p>
<p>当Eden区域被填满时，就会执行Minor GC。并把所有存活下来的对象转移到其中一个survivor区</p>
<p>Minor GC同样会检查存活下来的对象，并把他们转移到另一个survivor区。这样在一段时间内，总会有一个空的survivor区</p>
<p>经过多次GC周期后，仍然存活下来的对象会被转移到老年代内存空间。通常这是在新生代有资格提升到老年代前通过设定年龄阈值来完成的。</p>
<h5 id="老年代-Tenured"><a href="#老年代-Tenured" class="headerlink" title="老年代(Tenured)"></a>老年代(Tenured)</h5><p>老年代内存里包含了长期存活的对象和经过多次Minor GC后依然存活下来的对象。通常会在老年代内存被占满时进行垃圾回收。老年代的垃圾收集叫做Major GC。Major GC会花费更多的时间。旧生带占用大小为-Xmx值减去-Xmn对应的值</p>
<h5 id="永久代-Perm"><a href="#永久代-Perm" class="headerlink" title="永久代(Perm)"></a>永久代(Perm)</h5><p>永久代包含了JVM需要的应用元数据，这些元数据描述了在应用里使用的类和方法。注意，永久代不是Java堆内存的一部分，有一些JVM没有这一代，主要存放敞亮及类的一些信息，默认最小值为16MB，最大值为64MB，可以通过<code>-XX:PermSize</code>及<code>-XX:MaxPermSize</code>来设置最小值和最大值。</p>
<p>永久代存放JVM运行时使用的类。永久代同样包含了Java SE库的类和方法。永久代的对象在full GC时进行垃圾收集。</p>
<blockquote>
<p>以上对象的年轻代和年老代都是指的JVM的Heap空间，而持久代则是之前提到的方法区，不属于堆。</p>
</blockquote>
<h4 id="元空间-metaspace"><a href="#元空间-metaspace" class="headerlink" title="元空间(metaspace)"></a>元空间(metaspace)</h4><p>现今JDK8中PermGen(永久代)已经被彻底移除，取而代之的是metaspace数据区，使用native内存，申请和释放由虚拟机负责管理。</p>
<p>在JDK8下，旧的参数-XX:PermSize和-XX:MaxPermSize会被忽略并显示警告。新的Metaspace通过参数-XX:MetaspaceSize 和-XX:MaxMetaspaceSize设定。</p>
<h4 id="内存泄露和内存溢出的区别"><a href="#内存泄露和内存溢出的区别" class="headerlink" title="内存泄露和内存溢出的区别"></a>内存泄露和内存溢出的区别</h4><blockquote>
<p>泄漏强调无法收回，占用内存；溢出强调不够，无法满足</p>
</blockquote>
<ul>
<li>内存泄露：指程序在申请内存后，无法释放已申请的内存空间，一次内存泄露危害可以忽略，但内存泄露堆积后果很严重，无论多少内存,迟早会被占光。<br>或【内存中存在可达、无用的对象，且不会被GC回收，一直占用着内存。<br>该对象就是内存泄漏的对象 】</li>
<li>内存溢出：指程序在申请内存时，没有足够的内存空间供其使用，出现out of memory；比如申请了一个integer,但给它存了long才能存下的数，那就是内存溢出。<br>jvm 何时抛出OutOfMemoryException：并不是内存被耗空的时候才抛出<br>1）JVM98%的时间都花费在内存回收<br>2）每次回收的内存小于2%</li>
</ul>
<h4 id="垃圾收集器-统称"><a href="#垃圾收集器-统称" class="headerlink" title="垃圾收集器(统称)"></a>垃圾收集器(统称)</h4><h5 id="Minor-GC"><a href="#Minor-GC" class="headerlink" title="Minor GC"></a>Minor GC</h5><p>一般情况下，当新对象生成，并且在Eden申请空间失败时，就会触发minor GC，对Eden区域进行GC，清除非存活对象，并且把尚且存活的对象移动到Survivor区。</p>
<h5 id="Full-GC-Major-GC"><a href="#Full-GC-Major-GC" class="headerlink" title="Full GC(Major GC)"></a>Full GC(Major GC)</h5><p>对整个堆进行整理，包括Young、Tenured和Perm。Full GC因为需要对整个对进行回收，所以比Scavenge GC要慢，因此应该尽可能减少Full GC的次数。在对JVM调优的过程中，很大一部分工作就是对于FullGC的调节。有如下原因可能导致Full GC：</p>
<ul>
<li>年老代（Tenured）被写满</li>
<li>持久代（Perm）被写满</li>
<li>System.gc()被显示调用</li>
</ul>
<h4 id="垃圾收集器-分类"><a href="#垃圾收集器-分类" class="headerlink" title="垃圾收集器(分类)"></a>垃圾收集器(分类)</h4><h5 id="Serial-GC"><a href="#Serial-GC" class="headerlink" title="Serial GC"></a>Serial GC</h5><p>Serial是年轻代的单线程GC，GC算法是复制算法</p>
<h5 id="Serial-old-GC"><a href="#Serial-old-GC" class="headerlink" title="Serial old GC"></a>Serial old GC</h5><p>Serial old是老年代的单线程GC，GC算法是标记-整理算法</p>
<h5 id="Parnew-GC"><a href="#Parnew-GC" class="headerlink" title="Parnew GC"></a>Parnew GC</h5><p>Parnew是年轻代的多线程GC，GC算法是复制算法</p>
<h5 id="Parallel-Scavenge-GC"><a href="#Parallel-Scavenge-GC" class="headerlink" title="Parallel Scavenge GC"></a>Parallel Scavenge GC</h5><p>Parallel Scavenge是年轻代的多线程GC，GC算法是复制算法<br>优点：最优化吞吐量</p>
<blockquote>
<p>吞吐量 = 用户代码执行时间占cpu所有时间的比率</p>
</blockquote>
<h5 id="Parallel-old-GC"><a href="#Parallel-old-GC" class="headerlink" title="Parallel old GC"></a>Parallel old GC</h5><p>Parallel old是老年代的多线程GC，GC算法是标记-整理算法</p>
<h5 id="CMS（concurrent-mark-sweep）-GC"><a href="#CMS（concurrent-mark-sweep）-GC" class="headerlink" title="CMS（concurrent mark sweep） GC"></a>CMS（concurrent mark sweep） GC</h5><p>CMS是老年代的多线程GC，GC算法是标记-清除算法<br>优点：用户线程和GC线程并发同时运行<br>缺点：清除之后空间碎片太多</p>
<p><img src="Java-advanced/cms.jpg" alt></p>
<h5 id="G1-garbage-first-GC"><a href="#G1-garbage-first-GC" class="headerlink" title="G1(garbage first) GC"></a>G1(garbage first) GC</h5><p>G1是管理整个GC堆的多线程GC，它把java堆分成多个大小相等的region独立区域，GC算法是类似标记整理的算法<br>优点：并行和并发</p>
<h4 id="垃圾回收GC算法"><a href="#垃圾回收GC算法" class="headerlink" title="垃圾回收GC算法"></a>垃圾回收GC算法</h4><ol>
<li>引用计数算法:</li>
</ol>
<blockquote>
<p>该算法对每一个对象都有一个引用计数，没增加一次引用就+1，减少一次引用-1，在回收时将引用计数为0的对象清理掉。这种算法简单，但是无法解决循环引用的问题(比如: A引用B， B也引用A，但是A和B都没有被其它任何对象引用)。</p>
</blockquote>
<ol start="2">
<li>标记-清除算法:</li>
</ol>
<blockquote>
<p>该算法分为两个阶段， 第一阶段遍历找出所有需要被回收的对象，并做上标记，第二阶段对清理所有被标记的对象，这种算法效率比较低，并且会产生较多的内存碎片。</p>
</blockquote>
<ol start="3">
<li>标记-整理(压缩)算法:</li>
</ol>
<blockquote>
<p>该算法的第一阶段和标记-清除算法是一样的，而第二阶段它不是直接清理掉垃圾对象，而且将存活的对象往同一侧移动，移动完成后清理掉另一侧所有的对象。这种算法不会产生内存碎片，但是效率低下。</p>
</blockquote>
<ol start="4">
<li>复制算法:</li>
</ol>
<blockquote>
<p>该算法将内存分为两个区域，进行垃圾回收时，就将还活着的对象复制到另一块内存区域中，然后再将整片内存区域清空。这种算法简单快速，而且不会产生内存碎片，但是因为将内存分成两块，所以可用的内存会少很多。</p>
</blockquote>
<ol start="5">
<li>分代收集算法:</li>
</ol>
<blockquote>
<p>将内存细分为多个区域，不同区域GC的频率，并对不同的区域采用适当的收集算法。如JVM将内存分为年轻代和老年代，普通对象最开始分配在年轻代(大对象会直接分配到老年代)，同一个对象在经过几次GC后还存活着，就认为这个对象的生命周期会比较长，将其移入老年代，GC主要发生在年轻代。</p>
</blockquote>
<h4 id="GC工作机制"><a href="#GC工作机制" class="headerlink" title="GC工作机制"></a>GC工作机制</h4><p>1.新生代有一个Eden区和两个survivor区，首先将对象放入Eden区，如果空间不足就向其中的一个survivor区上放，如果仍然放不下就会引发一次发生在新生代的minor GC，将存活的对象放入另一个survivor区中，然后清空Eden和之前的那个survivor区的内存。在某次GC过程中，如果发现仍然又放不下的对象，就将这些对象放入老年代内存里去。</p>
<p>2.大对象以及长期存活的对象直接进入老年区。</p>
<p>3.当每次执行minor GC的时候应该对要晋升到老年代的对象进行分析，如果这些马上要到老年区的老年对象的大小超过了老年区的剩余大小，那么执行一次Full GC以尽可能地获得老年区的空间。</p>
<h4 id="GC-Roots"><a href="#GC-Roots" class="headerlink" title="GC Roots"></a>GC Roots</h4><p>针对的对象：从GC Roots搜索不到，而且经过一次标记清理之后仍没有复活的对象。<br>当一个对象到 GC Roots 没有任何引用链相接的时候，那么这个对象就是不可达，就可以被回收。</p>
<h4 id="不可达不一定会死"><a href="#不可达不一定会死" class="headerlink" title="不可达不一定会死"></a>不可达不一定会死</h4><p>即使在可达性分析算法中不可达的对象,也并非是“非死不可”的,这时候它们暂时处于“缓刑”阶段,要真正宣告一个对象死亡,至少要经历两次标记过程:<br>如果对象在进行可达性分析后发现没有与GC Roots相连接的引用链,那它将会被第一次标记并且进行一次筛选,筛选的条件是此对象是否有必要执行finalize()方法。当对象没有覆盖finalize()方法,或者finalize()方法已经被虚拟机调用过,虚拟机将这两种情况都视为“没有必要执行”。(即意味着直接回收)</p>
<h4 id="各区GC算法策略"><a href="#各区GC算法策略" class="headerlink" title="各区GC算法策略"></a>各区GC算法策略</h4><p>新生代：复制清理； 老年代：标记-清除或标记-整理算法； 永久代：存放Java中的类和加载类的类加载器本身。</p>
<h4 id="什么时候发生GC"><a href="#什么时候发生GC" class="headerlink" title="什么时候发生GC"></a>什么时候发生GC</h4><p>eden区放不下新生的对象时，发生minor gc，如果在发生minor gc之前，虚拟机检查老年代的最大可用的连续空间小于新生代所有对象的总空间，则需要担保策略。如果担保，则计算新生代对象晋升的平均空间，如果够用，则冒风险试一次，如果不够用就要发生一次fullgc。除了CMS的concurrent collection之外,年轻代和老年代都会被收集。</p>
<h4 id="什么时候转向老年区"><a href="#什么时候转向老年区" class="headerlink" title="什么时候转向老年区"></a>什么时候转向老年区</h4><ul>
<li>对象优先在eden区分配，eden区的gc之后对象年龄就加1，到15岁之后就转老年代</li>
<li>大对象会直接转向老年代</li>
<li>如果eden区的survivor区放不下对象时也会转向老年代</li>
</ul>
<h4 id="finalize"><a href="#finalize" class="headerlink" title="finalize"></a>finalize</h4><p>finalize是在垃圾收集器删除对象之前对这个对象调用的，如果对象没有在这个方法里进行自救，那只能被回收，但是一个对象的finalize()方法只会被系统自动调用一次</p>
<h4 id="减少GC开销"><a href="#减少GC开销" class="headerlink" title="减少GC开销"></a>减少GC开销</h4><ol>
<li>不要显式调用System.gc()</li>
<li>尽量减少临时对象的使用</li>
<li>尽量使用StringBuffer,而不用String来累加字符串</li>
<li>尽量少用静态对象变量</li>
</ol>
<h4 id="速学路径"><a href="#速学路径" class="headerlink" title="速学路径"></a>速学路径</h4><p><a href="http://icyfenix.iteye.com/blog/715301" target="_blank" rel="noopener">GC 什么时候对什么东西做什么</a></p>
<p><a href="http://www.importnew.com/23792.html" target="_blank" rel="noopener">jvm 知识大全</a></p>
<p><a href="http://www.jianshu.com/p/778dd3848196" target="_blank" rel="noopener">Java垃圾回收机制</a></p>
<h3 id="反射"><a href="#反射" class="headerlink" title="反射"></a>反射</h3><ul>
<li><p><strong>动态语言</strong></p>
<ul>
<li>Python，Ruby是动态语言，C++，Java，C#不是动态语言。但是JAVA有着一个非常突出的动态相关机制：Reflection(反射)，用在Java身上指的是我们可以于运行时加载、探知、使用编译期间完全未知的classes。换句话说，Java程序可以加载一个运行时才得知名称的class，获悉其完整构造（但不包括methods定义），并生成其对象实体、或对其fields设值、或唤起其methods。</li>
</ul>
</li>
<li><p><strong>概念</strong></p>
<ul>
<li>Java反射机制是指在运行状态中，对于任意一个类，都能够知道这个类的所有属性和方法；对于任意一个对象，都能够调用它的任意一个方法和属性；这种动态获取的信息以及动态调用对象的方法的功能称为java语言的反射机制</li>
</ul>
</li>
<li><p><strong>静态编译</strong></p>
<ul>
<li>在编译时确定类型，绑定对象，即通过</li>
</ul>
</li>
<li><p><strong>动态编译</strong></p>
<ul>
<li>运行时确定类型，绑定对象。动态编译最大限度发挥了java的灵活性，体现了多态的应用，有以降低类之间的藕合性</li>
</ul>
</li>
<li><p><strong>优点</strong></p>
<ul>
<li>一个大型的软件，不可能一次就把把它设计的很完美，当这个程序编译后，发布了，当发现需要更新某些功能时，我们不可能要用户把以前的卸载，再重新安装新的版本，假如这样的话，这个软件肯定是没有多少人用的。采用静态的话，需要把整个程序重新编译一次才可以实现功能的更新，而采用反射机制的话，它就可以不用卸载，只需要在运行时才动态的创建和编译，就可以实现该功能。</li>
</ul>
</li>
<li><p><strong>缺点</strong></p>
<ul>
<li>对性能有影响。使用反射基本上是一种解释操作，我们可以告诉JVM，我们希望做什么并且它满足我们的要求。这类操作总是慢于只直接执行相同的操作。</li>
</ul>
</li>
<li><p><strong>Object</strong></p>
<ul>
<li>该类是所有类的父类</li>
</ul>
</li>
<li><p><strong>Class类</strong></p>
<ul>
<li>类是java.lang.Class类的实例对象，而Class是所有类的类</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Class c = new Class();不能这样构建一个Class</span></span><br><span class="line"><span class="comment">//因为构造方法是私有的</span></span><br><span class="line"><span class="function"><span class="keyword">private</span>  <span class="title">Class</span><span class="params">(ClassLoader loader)</span> </span>&#123; </span><br><span class="line">    classLoader = loader; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>得到Class对象的3种方法</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//这说明任何一个类都有一个隐含的静态成员变量class，这种方式是通过获取类的静态成员变量class得到的</span></span><br><span class="line">Class c1 = Code.class;</span><br><span class="line"></span><br><span class="line"><span class="comment">//code1是Code的一个对象，这种方式是通过一个类的对象的getClass()方法获得的</span></span><br><span class="line">Code code1 = <span class="keyword">new</span> Code();</span><br><span class="line">Class c2 = code1.getClass();</span><br><span class="line"></span><br><span class="line"><span class="comment">//这种方法是Class类调用forName方法，通过一个类的全量限定名获得</span></span><br><span class="line">Class c3 = Class.forName(<span class="string">"com.trigl.reflect.Code"</span>);</span><br></pre></td></tr></table></figure>
<ul>
<li>c1、c2、c3都是Class的对象，他们是完全一样的，而且有个学名，叫做Code的类类型（class type）</li>
<li>我们可以通过类类型知道一个类的属性和方法，并且可以调用一个类的属性和方法，这就是反射的基础</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">System.out.println(c1.getName());</span><br><span class="line">System.out.println(c2.getName());</span><br><span class="line">System.out.println(c3.getName());</span><br><span class="line"><span class="comment">//输出</span></span><br><span class="line">com.trigl.reflect.Code</span><br><span class="line">com.trigl.reflect.Code</span><br><span class="line">com.trigl.reflect.Code</span><br></pre></td></tr></table></figure>
</li>
<li><p><strong>Class作用</strong></p>
<ul>
<li><p>获取成员方法Method</p>
</li>
<li><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> Method <span class="title">getDeclaredMethod</span><span class="params">(String name, Class&lt;?&gt; ...parameterTypes)</span> <span class="comment">// 得到该类指定参数的自身声明的方法，不包括父类的</span></span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Method[] <span class="title">getDeclaredMethods</span><span class="params">()</span></span>; <span class="comment">// 得到该类自身声明所有的方法，不包括父类的</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Method <span class="title">getMethod</span><span class="params">(String name, Class&lt;?&gt; ...parameterTypes)</span> <span class="comment">// 得到该类指定参数的自身所有的public方法，包括父类的</span></span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Method[] <span class="title">getMethods</span><span class="params">()</span></span>;<span class="comment">// 得到该类自身所有的public方法，包括父类的</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>获取成员变量Field</p>
</li>
<li><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> Field <span class="title">getDeclaredField</span><span class="params">(String name)</span> <span class="comment">// 获得该类指定名称的自身声明的变量，不包括其父类的变量</span></span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Field[] <span class="title">getDeclaredFields</span><span class="params">()</span> <span class="comment">// 获得该类自身声明的所有变量，不包括其父类的变量</span></span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Field <span class="title">getField</span><span class="params">(String name)</span> <span class="comment">// 获得该类指定名称的自身所有的public成员变量，包括其父类变量</span></span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Field[] <span class="title">getFields</span><span class="params">()</span> <span class="comment">// 获得该类自身所有的public成员变量，包括其父类变量</span></span></span><br></pre></td></tr></table></figure>
</li>
<li><p>获取构造函数Constructor</p>
</li>
<li><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> Constructor&lt;T&gt; <span class="title">getDeclaredConstructor</span><span class="params">(Class&lt;?&gt; ...parameterTypes)</span> <span class="comment">//  获得该类指定参数的自身声明的构造器，不包括其父类的构造器</span></span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Constructor&lt;?&gt;[] <span class="title">getDeclaredConstructors</span><span class="params">()</span> <span class="comment">//  获得该类所有的自身声明的构造器，不包括其父类的构造器</span></span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Constructor&lt;T&gt; <span class="title">getConstructor</span><span class="params">(Class&lt;?&gt; ...parameterTypes)</span> <span class="comment">// 获得该类指定参数的自身所有的public构造器，包括父类</span></span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Constructor&lt;?&gt;[] <span class="title">getConstructors</span><span class="params">()</span> <span class="comment">// 获得该类自身所有的public构造器，包括父类</span></span></span><br></pre></td></tr></table></figure>
</li>
<li><p>获得（Class,Method,Constructor上）的注解Annotation</p>
</li>
<li><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> &lt;A extends Annotation&gt;<span class="function">A <span class="title">getDeclaredAnnotation</span><span class="params">(Class&lt;A&gt; annotationClass)</span><span class="comment">//获取直接修饰该程序的指定类型的Annotation </span></span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Annotation[] <span class="title">getDeclaredAnnotations</span><span class="params">()</span><span class="comment">//获取直接修饰该程序的所有的Annotation </span></span></span><br><span class="line"><span class="function"><span class="keyword">public</span> &lt;A extends Annotation&gt;A <span class="title">getAnnotation</span><span class="params">(Class&lt;A&gt; annotationClass)</span> <span class="comment">//获取该程序元素上存在的指定类型的Annotation</span></span></span><br><span class="line"><span class="function"><span class="keyword">public</span> Annotation[] <span class="title">getAnnotations</span><span class="params">()</span> <span class="comment">//获取该程序元素上存在的所有的Annotation </span></span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">isAnnotationPresent</span><span class="params">(Class&lt;? extends Annotation&gt; annotationClass)</span> <span class="comment">//判断该程序元素上是否存在指定类型的注解</span></span></span><br></pre></td></tr></table></figure>
</li>
<li><p>实例化对象</p>
</li>
<li><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Class c = Class.forName(<span class="string">"com.tengj.reflect.Person"</span>);  <span class="comment">//先生成class</span></span><br><span class="line">Object o = c.newInstance();  <span class="comment">//newInstance会使用该类默认的构造器来实例化一个对象</span></span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
<li><p><strong>示例</strong></p>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line">    <span class="keyword">private</span> String msg=<span class="string">"hello wrold"</span>;</span><br><span class="line">  </span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">getName</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> name;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setName</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">getAge</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> age;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setAge</span><span class="params">(<span class="keyword">int</span> age)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.age = age;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="title">Person</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="title">Person</span><span class="params">(String name)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">this</span>.name = name;</span><br><span class="line">  		System.out.println(name);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">fun</span><span class="params">()</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"fun"</span>);</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">fun</span><span class="params">(String name,<span class="keyword">int</span> age)</span> </span>&#123;</span><br><span class="line">        System.out.println(<span class="string">"我叫"</span>+name+<span class="string">",今年"</span>+age+<span class="string">"岁"</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ReflectDemo</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span></span>&#123;</span><br><span class="line">      <span class="comment">//获取该类指定参数的方法</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Class c = Class.forName(<span class="string">"com.tengj.reflect.Person"</span>);</span><br><span class="line">            Object o = c.newInstance();</span><br><span class="line">            Method method = c.getMethod(<span class="string">"fun"</span>, String.class, <span class="keyword">int</span>.class);</span><br><span class="line">          <span class="comment">//调用该方法</span></span><br><span class="line">            method.invoke(o, <span class="string">"tengj"</span>, <span class="number">10</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">      <span class="comment">//获取该类声明的所有方法</span></span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">            Class c = Class.forName(<span class="string">"com.tengj.reflect.Person"</span>);</span><br><span class="line">            Method[] methods = c.getDeclaredMethods();</span><br><span class="line">            <span class="keyword">for</span>(Method m:methods)&#123;</span><br><span class="line">              <span class="comment">//得到方法返回值类型的类类型</span></span><br><span class="line">    			Class returType = m.getReturnType();</span><br><span class="line">              <span class="comment">//获取参数类型 参数列表类型的类类型</span></span><br><span class="line">   				Class[] paramTypes = m.getParameterTypes();</span><br><span class="line">              </span><br><span class="line">                String  methodName = m.getName();</span><br><span class="line">                System.out.println(methodName);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">      </span><br><span class="line">      <span class="comment">//获取该类声明的指定名称的成员变量</span></span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">            Class c = Class.forName(<span class="string">"com.tengj.reflect.Person"</span>);</span><br><span class="line">            Field field = c.getDeclaredField(<span class="string">"msg"</span>); <span class="comment">//因为msg变量是private的，所以不能用getField方法</span></span><br><span class="line">            Object o = c.newInstance();</span><br><span class="line">        <span class="comment">//设置是否允许访问，因为该变量是private的，所以要手动设置允许访问，如果msg是public的就不需要这行了。</span></span><br><span class="line">            field.setAccessible(<span class="keyword">true</span>);</span><br><span class="line">        <span class="comment">//获取该实例的成员变量的值</span></span><br><span class="line">            Object msg = field.get(o);</span><br><span class="line">        <span class="comment">//将该实例的成员变量的值设为“Bye~”</span></span><br><span class="line">        <span class="comment">//field.setString(o,"Bye~");</span></span><br><span class="line">        <span class="comment">//System.out.println(field.get(o));</span></span><br><span class="line">        <span class="comment">//输出“Bye~”</span></span><br><span class="line">            System.out.println(msg);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">      </span><br><span class="line">      <span class="comment">//获取该类声明的所有的成员变量</span></span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">            Class c = Class.forName(<span class="string">"com.tengj.reflect.Person"</span>);</span><br><span class="line">            Field[] fields = c.getDeclaredFields();</span><br><span class="line">            <span class="keyword">for</span>(Field field :fields)&#123;</span><br><span class="line">              <span class="comment">//得到成员变量的类型的类类型</span></span><br><span class="line">       			Class fieldType = field.getType();</span><br><span class="line">              </span><br><span class="line">                System.out.println(field.getName());</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">      </span><br><span class="line">      <span class="comment">//获取该类声明的指定参数的构造方法</span></span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">            Class c = Class.forName(<span class="string">"com.tengj.reflect.Person"</span>);</span><br><span class="line">            Constructor constructor = c.getDeclaredConstructor(String.class);</span><br><span class="line">        <span class="comment">//设置是否允许访问，因为该构造器是private的，所以要手动设置允许访问，如果构造器是public的就不需要这行了。</span></span><br><span class="line">            constructor.setAccessible(<span class="keyword">true</span>);</span><br><span class="line">        <span class="comment">//c.newInstance()只能是调用默认的无参构造方法</span></span><br><span class="line">            Object o = constructor.newInstance(<span class="string">"tengj"</span>);<span class="comment">//选择使用有一个形参的构造方法</span></span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">      </span><br><span class="line">      <span class="comment">//获取该类声明的所有构造方法</span></span><br><span class="line">      <span class="keyword">try</span> &#123;</span><br><span class="line">            Class c = Class.forName(<span class="string">"com.tengj.reflect.Person"</span>);</span><br><span class="line">      		Constructor[] constructors = c.getDeclaredConstructors();</span><br><span class="line">            <span class="keyword">for</span>(Constructor constructor:constructors)&#123;</span><br><span class="line">                System.out.println(constructor);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">结果：</span><br><span class="line">我叫tengj,今年<span class="number">10</span>岁</span><br><span class="line"></span><br><span class="line">getName</span><br><span class="line">setName</span><br><span class="line">setAge</span><br><span class="line">fun</span><br><span class="line">fun</span><br><span class="line">getAge</span><br><span class="line"></span><br><span class="line">hello wrold</span><br><span class="line">  </span><br><span class="line">name</span><br><span class="line">age</span><br><span class="line">msg</span><br><span class="line">  </span><br><span class="line">tengj</span><br><span class="line">  </span><br><span class="line"><span class="keyword">public</span> com.tengj.reflect.Person()</span><br><span class="line"><span class="keyword">public</span> com.tengj.reflect.Person(java.lang.String)</span><br></pre></td></tr></table></figure>
<ul>
<li><strong>使用反射避免泛型的类型约束</strong></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">GenericEssence</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        List list1 = <span class="keyword">new</span> ArrayList(); <span class="comment">// 没有泛型</span></span><br><span class="line">        List&lt;String&gt; list2 = <span class="keyword">new</span> ArrayList&lt;String&gt;(); <span class="comment">// 有泛型</span></span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">         * 1.首先观察正常添加元素方式，在编译器检查泛型，</span></span><br><span class="line"><span class="comment">         * 这个时候如果list2添加int类型会报错</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        list2.add(<span class="string">"hello"</span>);</span><br><span class="line"><span class="comment">//      list2.add(20); // 报错！list2有泛型限制，只能添加String，添加int报错</span></span><br><span class="line">        System.out.println(<span class="string">"list2的长度是："</span> + list2.size()); <span class="comment">// 此时list2长度为1</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">         * 2.然后通过反射添加元素方式，在运行期动态加载类，首先得到list1和list2</span></span><br><span class="line"><span class="comment">         * 的类类型相同，然后再通过方法反射绕过编译器来调用add方法，看能否插入int</span></span><br><span class="line"><span class="comment">         * 型的元素</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        Class c1 = list1.getClass();</span><br><span class="line">        Class c2 = list2.getClass();</span><br><span class="line">        System.out.println(c1 == c2); <span class="comment">// 结果：true，说明类类型完全相同</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">// 验证：我们可以通过方法的反射来给list2添加元素，这样可以绕过编译检查</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Method m = c2.getMethod(<span class="string">"add"</span>, Object.class); <span class="comment">// 通过方法反射得到add方法</span></span><br><span class="line">            m.invoke(list2, <span class="number">20</span>); <span class="comment">// 给list2添加一个int型的，上面显示在编译器是会报错的</span></span><br><span class="line">            System.out.println(<span class="string">"list2的长度是："</span> + list2.size()); <span class="comment">// 结果：2，说明list2长度增加了，并没有泛型检查</span></span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">         * 综上可以看出，在编译器的时候，泛型会限制集合内元素类型保持一致，但是编译器结束进入</span></span><br><span class="line"><span class="comment">         * 运行期以后，泛型就不再起作用了，即使是不同类型的元素也可以插入集合。</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">结果：</span><br><span class="line">list2的长度是：1</span><br><span class="line">true</span><br><span class="line">list2的长度是：2</span><br></pre></td></tr></table></figure>
<h3 id="注解"><a href="#注解" class="headerlink" title="注解"></a>注解</h3><ul>
<li><p><strong>作用</strong></p>
<ul>
<li>创建文档。<ul>
<li>这是最常见的，也是java 最早提供的注解。常用的有<code>@see</code> <code>@param</code> <code>@return</code> 等</li>
</ul>
</li>
<li>跟踪代码中的依赖性。<ul>
<li>实现替代配置文件功能。比较常见的是spring 2.5 开始的基于注解配置。作用就是减少配置。现在的框架基本都使用了这种配置来减少配置文件的数量。</li>
</ul>
</li>
<li>甚至执行基本编译时检查。<ul>
<li>如<code>@override</code> 放在方法前，如果你这个方法并不是覆盖了超类方法，则编译时就能检查出。</li>
</ul>
</li>
</ul>
</li>
<li><p><strong>标准 Annotation</strong> (java內置注解)</p>
<ul>
<li>@Override<ul>
<li>用于修饰此方法覆盖了父类的方法。</li>
</ul>
</li>
<li>@Deprecated<ul>
<li>用于修饰已经过时的方法。</li>
</ul>
</li>
<li>@SuppressWarnings<ul>
<li>通知java编译器忽略特定的警告信息<blockquote>
<p>@SuppressWarnings(value={“deprecation”, “unchecked”})<br>@SuppressWarnings({“deprecation”, “unchecked”})<br>@SuppressWarnings(“unchecked”)</p>
</blockquote>
</li>
</ul>
</li>
</ul>
</li>
<li><p><strong>元 Annotation</strong> (元注解)</p>
<ul>
<li><p>元 Annotation 是指用来定义 Annotation 的 Annotation</p>
</li>
<li><p>@Retention</p>
<ul>
<li>指明了该Annotation被保留的时间长短。</li>
<li>RetentionPolicy取值为SOURCE，CLASS，RUNTIME。<blockquote>
<p>SOURCE：在源文件中有效(即源文件保留)<br>CLASS：在class文件中有效(即class保留)<br>RUNTIME：在运行时有效(即运行时保留)</p>
</blockquote>
</li>
</ul>
</li>
<li><p>@Target</p>
<ul>
<li>指明该类型的注解可以注解的程序元素的范围。</li>
<li>该元注解的取值可以为<code>TYPE</code>,<code>METHOD</code>,<code>CONSTRUCTOR</code>,<code>FIELD</code>等。</li>
<li>如果Target元注解没有出现，那么定义的注解可以应用于程序的任何元素。<blockquote>
<p>CONSTRUCTOR：用于描述构造器<br>FIELD：用于描述域<br>LOCAL_VARIABLE：用于描述局部变量<br>METHOD：用于描述方法<br>PACKAGE：用于描述包<br>PARAMETER：用于描述参数<br>TYPE：用于描述类、接口(包括注解类型) 或enum声明</p>
</blockquote>
</li>
</ul>
</li>
<li><p>@Inherited</p>
<ul>
<li>标记注解，表示了某个被标注的类型是被继承的</li>
<li>如果用户在当前类中查询这个元注解类型并且当前类的声明中不包含这个元注解类型，那么也将自动查询当前类的父类是否存在Inherited元注解，这个动作将被重复执行知道这个标注类型被找到，或者是查询到顶层的父类。</li>
</ul>
</li>
<li><p>@Documented</p>
<ul>
<li>指明拥有这个注解的元素可以被javadoc此类的工具文档化。</li>
<li>如果一种声明使用Documented进行注解，这种类型的注解被作为被标注的程序成员的公共API。</li>
</ul>
</li>
</ul>
</li>
<li><p><strong>示例</strong></p>
<ul>
<li>注解方法不能带有参数</li>
<li>注解方法返回值类型限定为：基本类型、<code>String</code>、<code>Enums</code>、<code>Annotation</code>或者是这些类型的数组</li>
<li>注解方法可以有默认值</li>
<li>注解本身能够包含元注解，元注解被用来注解其它注解</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Documented</span></span><br><span class="line"><span class="meta">@Target</span>(ElementType.METHOD)</span><br><span class="line"><span class="meta">@Inherited</span></span><br><span class="line"><span class="meta">@Retention</span>(RetentionPolicy.RUNTIME)</span><br><span class="line"><span class="keyword">public</span> <span class="meta">@interface</span> MethodInfo&#123;</span><br><span class="line">    <span class="function">String <span class="title">author</span><span class="params">()</span> <span class="keyword">default</span> 'yangki'</span>;</span><br><span class="line">    <span class="function">String <span class="title">date</span><span class="params">()</span></span>;</span><br><span class="line">    <span class="function"><span class="keyword">int</span> <span class="title">revision</span><span class="params">()</span> <span class="keyword">default</span> 1</span>;</span><br><span class="line">    <span class="function">String <span class="title">comments</span><span class="params">()</span></span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> net.yangki.annotations;</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AnnotationExample</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="meta">@MethodInfo</span>(author = <span class="string">'yangki'</span>, comments = <span class="string">'Main method'</span>, date = <span class="string">'Nov 17 2012'</span>, revision = <span class="number">1</span>)</span><br><span class="line">	<span class="function"><span class="keyword">public</span> String <span class="title">toString</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	    <span class="keyword">return</span> <span class="string">'Overriden toString method'</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="meta">@Deprecated</span></span><br><span class="line">	<span class="meta">@MethodInfo</span>(comments = <span class="string">'deprecated method'</span>, date = <span class="string">'Nov 17 2015'</span>)</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">oldMethod</span><span class="params">()</span> </span>&#123;</span><br><span class="line"> 	   System.out.println(<span class="string">'old method, don'</span>t use it.<span class="string">');</span></span><br><span class="line"><span class="string">	&#125; </span></span><br><span class="line"><span class="string"></span></span><br><span class="line"><span class="string">	@SuppressWarnings(&#123; '</span>unchecked<span class="string">', '</span>deprecation<span class="string">' &#125;)</span></span><br><span class="line"><span class="string">	@MethodInfo(author = '</span>yangki<span class="string">', comments = '</span>Main method<span class="string">', date = '</span>Nov <span class="number">17</span> <span class="number">2015</span><span class="string">', revision = 10)</span></span><br><span class="line"><span class="string">	public static void genericsTest() throws FileNotFoundException &#123;</span></span><br><span class="line"><span class="string">	    List l = new ArrayList();</span></span><br><span class="line"><span class="string">	    l.add('</span>abc<span class="string">');</span></span><br><span class="line"><span class="string"> 	   oldMethod();</span></span><br><span class="line"><span class="string">	&#125;</span></span><br><span class="line"><span class="string">&#125;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>用反射来解析注解<ul>
<li>注解的<code>RetentionPolicy</code>应该设置为<code>RUNTIME</code> ，否则java类的注解信息在执行过程中将不可用，那么我们也不能从中得到任何和注解有关的数据。</li>
</ul>
</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AnnotationParsing</span> </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">    <span class="keyword">for</span> (Method method : AnnotationParsing.class</span><br><span class="line">         <span class="comment">//Class.getClassLoader()方法返回的类的类加载器</span></span><br><span class="line">        .getClassLoader()</span><br><span class="line">         <span class="comment">//加载AnnotationExample类</span></span><br><span class="line">        .loadClass((<span class="string">'net.yangki.annotations.AnnotationExample'</span>))</span><br><span class="line">         <span class="comment">//获得AnnotationExample类的Class后调用getMethods()获取该类的所有的public方法</span></span><br><span class="line">        .getMethods()) &#123;</span><br><span class="line">        <span class="comment">//判断该方法上的MethodInfo注解是否存在</span></span><br><span class="line">        <span class="keyword">if</span> (method.isAnnotationPresent(com.journaldev.annotations.MethodInfo.class)) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                <span class="keyword">for</span> (Annotation anno : method.getDeclaredAnnotations()) &#123;</span><br><span class="line">                    System.out.println(<span class="string">'Annotation in Method '</span><span class="string">'+ method + '</span><span class="string">' : '</span> + anno);</span><br><span class="line">                    &#125;</span><br><span class="line">                MethodInfo methodAnno = method.getAnnotation(MethodInfo.class);</span><br><span class="line">                <span class="keyword">if</span> (methodAnno.revision() == <span class="number">1</span>) &#123;</span><br><span class="line">                    System.out.println(<span class="string">'Method with revision no 1 = '</span>+ method);</span><br><span class="line">                    &#125;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (Throwable ex) &#123;</span><br><span class="line">                    ex.printStackTrace();</span><br><span class="line">                    &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    &#125; <span class="keyword">catch</span> (ClassNotFoundException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">         &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>​</p>
</li>
</ul>

      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/java/" rel="tag"># java</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2016/10/12/Java-foundation/" rel="next" title="Java 基础">
                <i class="fa fa-chevron-left"></i> Java 基础
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2016/10/26/Java-practice/" rel="prev" title="Java 实践">
                Java 实践 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>


  </div>


          </div>
          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">frank</p>
              <div class="site-description motion-element" itemprop="description">总有一天你是我的</div>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">29</span>
                    <span class="site-state-item-name">日志</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  
                    
                      <a href="/categories/">
                    
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">18</span>
                    <span class="site-state-item-name">分类</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  
                    
                      <a href="/tags/">
                    
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">27</span>
                    <span class="site-state-item-name">标签</span>
                  </a>
                </div>
              
            </nav>
          

          
            <div class="feed-link motion-element">
              <a href="/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          

          

          

          
          

          
            
          
          

        </div>
      </div>

      
      <!--noindex-->
        <div class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
            
            
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#异常"><span class="nav-number">1.</span> <span class="nav-text">异常</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#try-with-resources"><span class="nav-number">1.1.</span> <span class="nav-text">try -with-resources</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#泛型"><span class="nav-number">2.</span> <span class="nav-text">泛型</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#通配符"><span class="nav-number">2.1.</span> <span class="nav-text">通配符</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#上边界限定通配符"><span class="nav-number">2.2.</span> <span class="nav-text">上边界限定通配符</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#下边界限定通配符"><span class="nav-number">2.3.</span> <span class="nav-text">下边界限定通配符</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#边界通配符"><span class="nav-number">2.4.</span> <span class="nav-text">边界通配符</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#多线程"><span class="nav-number">3.</span> <span class="nav-text">多线程</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#IO处理"><span class="nav-number">4.</span> <span class="nav-text">IO处理</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Java-Nio"><span class="nav-number">5.</span> <span class="nav-text">Java Nio</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#阻塞和非阻塞（都是同步）"><span class="nav-number">5.1.</span> <span class="nav-text">阻塞和非阻塞（都是同步）</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#同步和异步"><span class="nav-number">5.2.</span> <span class="nav-text">同步和异步</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Channel"><span class="nav-number">5.3.</span> <span class="nav-text">Channel</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Buffer"><span class="nav-number">5.4.</span> <span class="nav-text">Buffer</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Selector"><span class="nav-number">5.5.</span> <span class="nav-text">Selector</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#邮箱"><span class="nav-number">6.</span> <span class="nav-text">邮箱</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#验证码"><span class="nav-number">7.</span> <span class="nav-text">验证码</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#二维码"><span class="nav-number">8.</span> <span class="nav-text">二维码</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Excel导入导出"><span class="nav-number">9.</span> <span class="nav-text">Excel导入导出</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#类加载"><span class="nav-number">10.</span> <span class="nav-text">类加载</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#类什么时候初始化"><span class="nav-number">10.1.</span> <span class="nav-text">类什么时候初始化</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#类加载器"><span class="nav-number">10.2.</span> <span class="nav-text">类加载器</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#双亲委派模型"><span class="nav-number">10.3.</span> <span class="nav-text">双亲委派模型</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#JMM内存模型"><span class="nav-number">10.4.</span> <span class="nav-text">JMM内存模型</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#JVM的内存结构"><span class="nav-number">10.5.</span> <span class="nav-text">JVM的内存结构</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#新生代-Young"><span class="nav-number">10.5.1.</span> <span class="nav-text">新生代(Young)</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#老年代-Tenured"><span class="nav-number">10.5.2.</span> <span class="nav-text">老年代(Tenured)</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#永久代-Perm"><span class="nav-number">10.5.3.</span> <span class="nav-text">永久代(Perm)</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#元空间-metaspace"><span class="nav-number">10.6.</span> <span class="nav-text">元空间(metaspace)</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#内存泄露和内存溢出的区别"><span class="nav-number">10.7.</span> <span class="nav-text">内存泄露和内存溢出的区别</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#垃圾收集器-统称"><span class="nav-number">10.8.</span> <span class="nav-text">垃圾收集器(统称)</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#Minor-GC"><span class="nav-number">10.8.1.</span> <span class="nav-text">Minor GC</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Full-GC-Major-GC"><span class="nav-number">10.8.2.</span> <span class="nav-text">Full GC(Major GC)</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#垃圾收集器-分类"><span class="nav-number">10.9.</span> <span class="nav-text">垃圾收集器(分类)</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#Serial-GC"><span class="nav-number">10.9.1.</span> <span class="nav-text">Serial GC</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Serial-old-GC"><span class="nav-number">10.9.2.</span> <span class="nav-text">Serial old GC</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Parnew-GC"><span class="nav-number">10.9.3.</span> <span class="nav-text">Parnew GC</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Parallel-Scavenge-GC"><span class="nav-number">10.9.4.</span> <span class="nav-text">Parallel Scavenge GC</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Parallel-old-GC"><span class="nav-number">10.9.5.</span> <span class="nav-text">Parallel old GC</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#CMS（concurrent-mark-sweep）-GC"><span class="nav-number">10.9.6.</span> <span class="nav-text">CMS（concurrent mark sweep） GC</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#G1-garbage-first-GC"><span class="nav-number">10.9.7.</span> <span class="nav-text">G1(garbage first) GC</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#垃圾回收GC算法"><span class="nav-number">10.10.</span> <span class="nav-text">垃圾回收GC算法</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#GC工作机制"><span class="nav-number">10.11.</span> <span class="nav-text">GC工作机制</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#GC-Roots"><span class="nav-number">10.12.</span> <span class="nav-text">GC Roots</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#不可达不一定会死"><span class="nav-number">10.13.</span> <span class="nav-text">不可达不一定会死</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#各区GC算法策略"><span class="nav-number">10.14.</span> <span class="nav-text">各区GC算法策略</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#什么时候发生GC"><span class="nav-number">10.15.</span> <span class="nav-text">什么时候发生GC</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#什么时候转向老年区"><span class="nav-number">10.16.</span> <span class="nav-text">什么时候转向老年区</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#finalize"><span class="nav-number">10.17.</span> <span class="nav-text">finalize</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#减少GC开销"><span class="nav-number">10.18.</span> <span class="nav-text">减少GC开销</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#速学路径"><span class="nav-number">10.19.</span> <span class="nav-text">速学路径</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#反射"><span class="nav-number">11.</span> <span class="nav-text">反射</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#注解"><span class="nav-number">12.</span> <span class="nav-text">注解</span></a></li></ol></div>
            

          </div>
        </div>
      <!--/noindex-->
      

      

    </div>
  </aside>
  


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">frank</span>

  

  
</div>


  <div class="powered-by">由 <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> 强力驱动 v3.8.0</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">主题 – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Muse</a> v7.1.1</div>




        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>














  
    
    
  
  <script color="0,0,255" opacity="0.5" zindex="-1" count="99" src="/lib/canvas-nest/canvas-nest.min.js"></script>













  
  <script src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>


  


  <script src="/js/utils.js?v=7.1.1"></script>

  <script src="/js/motion.js?v=7.1.1"></script>



  
  


  <script src="/js/schemes/muse.js?v=7.1.1"></script>



  
  <script src="/js/scrollspy.js?v=7.1.1"></script>
<script src="/js/post-details.js?v=7.1.1"></script>



  


  <script src="/js/next-boot.js?v=7.1.1"></script>


  

  

  

  


  


  




  

  

  

  

  

  

  

  

  

  

  

  

  

  

</body>
</html>
